\documentclass{standalone}
\usepackage{tikz}
\usepackage{aeguill}
\begin{document}
% generated by Plantuml 1.2022.12      
\definecolor{plantucolor0000}{RGB}{0,0,0}
\definecolor{plantucolor0001}{RGB}{254,255,221}
\definecolor{plantucolor0002}{RGB}{24,24,24}
\definecolor{plantucolor0003}{RGB}{241,241,241}
\definecolor{plantucolor0004}{RGB}{173,209,178}
\definecolor{plantucolor0005}{RGB}{200,41,48}
\definecolor{plantucolor0006}{RGB}{132,190,132}
\definecolor{plantucolor0007}{RGB}{3,128,72}
\definecolor{plantucolor0008}{RGB}{180,167,229}
\definecolor{plantucolor0009}{RGB}{255,119,0}
\definecolor{plantucolor0010}{RGB}{242,77,92}
\begin{tikzpicture}[yscale=-1
,pstyle0/.style={color=black,line width=1.5pt}
,pstyle1/.style={color=plantucolor0002,fill=plantucolor0001,line width=0.5pt}
,pstyle2/.style={color=plantucolor0002,fill=plantucolor0001,line width=1.0pt}
,pstyle3/.style={color=plantucolor0002,fill=plantucolor0003,line width=0.5pt}
,pstyle4/.style={color=plantucolor0002,fill=plantucolor0004,line width=1.0pt}
,pstyle5/.style={color=plantucolor0002,line width=0.5pt}
,pstyle7/.style={color=plantucolor0007,fill=plantucolor0006,line width=1.0pt}
,pstyle8/.style={color=plantucolor0002,fill=plantucolor0008,line width=1.0pt}
,pstyle9/.style={color=plantucolor0002,fill=plantucolor0009,line width=1.0pt}
,pstyle10/.style={color=plantucolor0007,line width=1.0pt}
,pstyle12/.style={color=plantucolor0002,line width=1.0pt}
,pstyle13/.style={color=plantucolor0002,line width=1.0pt,dash pattern=on 7.0pt off 7.0pt}
,pstyle14/.style={color=plantucolor0002,fill=plantucolor0002,line width=1.0pt}
,pstyle15/.style={color=black,fill=black,line width=1.0pt}
]
\draw[pstyle0] (29.14pt,6.602pt) -- (205.5926pt,6.602pt) -- (215.0926pt,31.6699pt) -- (1898.14pt,31.6699pt) -- (1900.64pt,1161.102pt) -- (29.14pt,1163.602pt) -- (26.64pt,9.102pt);
\draw[pstyle0] (26.64pt,31.6699pt) -- (215.0926pt,31.6699pt);
\node at (30.64pt,8.602pt)[below right,color=black]{\textbf{com.telegraft.rafktor}};
\draw[pstyle0] (326.14pt,862.102pt) -- (438.1926pt,862.102pt) -- (447.6926pt,887.1699pt) -- (463.14pt,887.1699pt) -- (465.64pt,961.602pt) -- (326.14pt,964.102pt) -- (323.64pt,864.602pt);
\draw[pstyle0] (323.64pt,887.1699pt) -- (447.6926pt,887.1699pt);
\node at (327.64pt,864.102pt)[below right,color=black]{\textbf{StateMachine}};
\draw[pstyle0] (492.14pt,842.102pt) -- (580.9189pt,842.102pt) -- (590.4189pt,867.1699pt) -- (1402.14pt,867.1699pt) -- (1404.64pt,1137.102pt) -- (492.14pt,1139.602pt) -- (489.64pt,844.602pt);
\draw[pstyle0] (489.64pt,867.1699pt) -- (590.4189pt,867.1699pt);
\node at (493.64pt,844.102pt)[below right,color=black]{\textbf{RaftServer}};
\draw[pstyle0] (1741.14pt,647.602pt) -- (1772.4169pt,647.602pt) -- (1781.9169pt,672.6699pt) -- (1874.14pt,672.6699pt) -- (1876.64pt,747.102pt) -- (1741.14pt,749.602pt) -- (1738.64pt,650.102pt);
\draw[pstyle0] (1738.64pt,672.6699pt) -- (1781.9169pt,672.6699pt);
\node at (1742.64pt,649.602pt)[below right,color=black]{\textbf{Log}};
\draw[pstyle0] (1137.14pt,323.602pt) -- (1213.34pt,323.602pt) -- (1222.84pt,348.6699pt) -- (1712.14pt,348.6699pt) -- (1714.64pt,766.102pt) -- (1137.14pt,768.602pt) -- (1134.64pt,326.102pt);
\draw[pstyle0] (1134.64pt,348.6699pt) -- (1222.84pt,348.6699pt);
\node at (1138.64pt,325.602pt)[below right,color=black]{\textbf{RaftState}};
\draw[pstyle1] (56.64pt,93.602pt) -- (56.64pt,209.8381pt) -- (362.4772pt,209.8381pt) -- (362.4772pt,103.602pt) -- (352.4772pt,93.602pt) -- (56.64pt,93.602pt);
\draw[pstyle2] (352.4772pt,93.602pt) -- (352.4772pt,103.602pt) -- (362.4772pt,103.602pt) -- (352.4772pt,93.602pt);
\node at (62.64pt,98.602pt)[below right,color=black]{This diagram uses elements from};
\node at (62.64pt,116.308pt)[below right,color=black]{the scala syntax: types are specified};
\node at (62.64pt,134.014pt)[below right,color=black]{after ":" and type parameters are};
\node at (62.64pt,151.72pt)[below right,color=black]{between squared brackets. Collections};
\node at (62.64pt,169.426pt)[below right,color=black]{and types are the ones used in the actual};
\node at (62.64pt,187.1321pt)[below right,color=black]{code.};
\draw[pstyle3] (252.64pt,415.102pt) arc (180:270:5pt) -- (257.64pt,410.102pt) -- (657.7766pt,410.102pt) arc (270:360:5pt) -- (662.7766pt,415.102pt) -- (662.7766pt,529.3736pt) arc (0:90:5pt) -- (657.7766pt,534.3736pt) -- (257.64pt,534.3736pt) arc (90:180:5pt) -- (252.64pt,529.3736pt) -- cycle;
\draw[pstyle4] (399.9163pt,426.102pt) ellipse (11pt and 11pt);
\node at (399.9163pt,426.102pt)[]{\textbf{\Large C}};
\node at (420.4163pt,416.568pt)[below right,color=black]{Configuration};
\draw[pstyle5] (253.64pt,442.102pt) -- (661.7766pt,442.102pt);
\draw[color=plantucolor0005,line width=1.0pt] (260.64pt,454.1359pt) rectangle (266.64pt,460.1359pt);
\node at (272.64pt,446.102pt)[below right,color=black]{servers: Set[String]};
\draw[pstyle5] (253.64pt,469.1699pt) -- (661.7766pt,469.1699pt);
\draw[pstyle7] (263.64pt,484.2039pt) ellipse (3pt and 3pt);
\node at (272.64pt,473.1699pt)[below right,color=black]{Configuration(servers: Set[String]): Configuration};
\draw[pstyle7] (263.64pt,503.2718pt) ellipse (3pt and 3pt);
\node at (272.64pt,492.2378pt)[below right,color=black]{getConfiguration(): Set[String]};
\draw[pstyle7] (263.64pt,522.3397pt) ellipse (3pt and 3pt);
\node at (272.64pt,511.3057pt)[below right,color=black]{getServer(server: String): String};
\draw[pstyle1] (159.64pt,678.102pt) -- (159.64pt,741.22pt) -- (453.4669pt,741.22pt) -- (453.4669pt,688.102pt) -- (443.4669pt,678.102pt) -- (330.35pt,678.102pt) -- (418.36pt,534.362pt) -- (322.35pt,678.102pt) -- (159.64pt,678.102pt);
\draw[pstyle1] (443.4669pt,678.102pt) -- (443.4669pt,688.102pt) -- (453.4669pt,688.102pt) -- (443.4669pt,678.102pt);
\node at (165.64pt,683.102pt)[below right,color=black]{Servers are parsed from the provided};
\node at (165.64pt,700.808pt)[below right,color=black]{configuration, and they are identified};
\node at (165.64pt,718.514pt)[below right,color=black]{by the following string "interface:port"};
\draw[pstyle3] (42.64pt,690.602pt) arc (180:270:5pt) -- (47.64pt,685.602pt) -- (119.1673pt,685.602pt) arc (270:360:5pt) -- (124.1673pt,690.602pt) -- (124.1673pt,728.602pt) arc (0:90:5pt) -- (119.1673pt,733.602pt) -- (47.64pt,733.602pt) arc (90:180:5pt) -- (42.64pt,728.602pt) -- cycle;
\draw[pstyle8] (57.64pt,701.602pt) ellipse (11pt and 11pt);
\node at (57.64pt,701.602pt)[]{\textbf{\Large I}};
\node at (71.64pt,692.068pt)[below right,color=black]{\textit{Server}};
\draw[pstyle5] (43.64pt,717.602pt) -- (123.1673pt,717.602pt);
\draw[pstyle5] (43.64pt,725.602pt) -- (123.1673pt,725.602pt);
\draw[pstyle3] (43.14pt,905.102pt) arc (180:270:5pt) -- (48.14pt,900.102pt) -- (157.2067pt,900.102pt) arc (270:360:5pt) -- (162.2067pt,905.102pt) -- (162.2067pt,943.102pt) arc (0:90:5pt) -- (157.2067pt,948.102pt) -- (48.14pt,948.102pt) arc (90:180:5pt) -- (43.14pt,943.102pt) -- cycle;
\draw[pstyle4] (58.14pt,916.102pt) ellipse (11pt and 11pt);
\node at (58.14pt,916.102pt)[]{\textbf{\Large C}};
\node at (72.14pt,906.568pt)[below right,color=black]{ServerImpl};
\draw[pstyle5] (44.14pt,932.102pt) -- (161.2067pt,932.102pt);
\draw[pstyle5] (44.14pt,940.102pt) -- (161.2067pt,940.102pt);
\draw[pstyle3] (489.14pt,674.602pt) arc (180:270:5pt) -- (494.14pt,669.602pt) -- (736.9605pt,669.602pt) arc (270:360:5pt) -- (741.9605pt,674.602pt) -- (741.9605pt,745.0819pt) arc (0:90:5pt) -- (736.9605pt,750.0819pt) -- (494.14pt,750.0819pt) arc (90:180:5pt) -- (489.14pt,745.0819pt) -- cycle;
\draw[pstyle9] (559.3225pt,692.308pt) ellipse (11pt and 11pt);
\node at (559.3225pt,692.308pt)[]{\textbf{\Large S}};
\node at (594.831pt,674.602pt)[below right,color=black]{\textit{\guillemotleft Singleton\guillemotright }};
\node at (579.8225pt,690.9461pt)[below right,color=black]{StateMachine};
\draw[pstyle5] (490.14pt,715.014pt) -- (740.9605pt,715.014pt);
\draw[pstyle5] (490.14pt,723.014pt) -- (740.9605pt,723.014pt);
\draw[pstyle7] (500.14pt,738.048pt) ellipse (3pt and 3pt);
\node at (509.14pt,727.014pt)[below right,color=black]{\underline{apply(): Behavior[Command]}};
\draw[pstyle1] (814.64pt,678.102pt) -- (814.64pt,741.22pt) -- (1078.603pt,741.22pt) -- (1078.603pt,688.102pt) -- (1068.603pt,678.102pt) -- (814.64pt,678.102pt);
\draw[pstyle2] (1068.603pt,678.102pt) -- (1068.603pt,688.102pt) -- (1078.603pt,688.102pt) -- (1068.603pt,678.102pt);
\node at (820.64pt,683.102pt)[below right,color=black]{There are more than the displayed};
\node at (820.64pt,700.808pt)[below right,color=black]{implementations, but they are not};
\node at (820.64pt,718.514pt)[below right,color=black]{shown for the sake of brevity.};
\draw[pstyle3] (1421.14pt,838.602pt) arc (180:270:5pt) -- (1426.14pt,833.602pt) -- (1879.4754pt,833.602pt) arc (270:360:5pt) -- (1884.4754pt,838.602pt) -- (1884.4754pt,1010.0774pt) arc (0:90:5pt) -- (1879.4754pt,1015.0774pt) -- (1426.14pt,1015.0774pt) arc (90:180:5pt) -- (1421.14pt,1010.0774pt) -- cycle;
\draw[pstyle4] (1634.0377pt,849.602pt) ellipse (11pt and 11pt);
\node at (1634.0377pt,849.602pt)[]{\textbf{\Large C}};
\node at (1654.5377pt,840.068pt)[below right,color=black]{Log};
\draw[pstyle5] (1422.14pt,865.602pt) -- (1883.4754pt,865.602pt);
\draw[pstyle10] (1432.14pt,880.6359pt) ellipse (3pt and 3pt);
\node at (1441.14pt,869.602pt)[below right,color=black]{logEntries: Vector[LogEntry]};
\draw[pstyle5] (1422.14pt,892.6699pt) -- (1883.4754pt,892.6699pt);
\draw[pstyle7] (1432.14pt,907.7039pt) ellipse (3pt and 3pt);
\node at (1441.14pt,896.6699pt)[below right,color=black]{Log(logEntries: Vector[LogEntry]): Log};
\draw[pstyle7] (1432.14pt,926.7718pt) ellipse (3pt and 3pt);
\node at (1441.14pt,915.7378pt)[below right,color=black]{apply(index: Int): LogEntry};
\draw[pstyle7] (1432.14pt,945.8397pt) ellipse (3pt and 3pt);
\node at (1441.14pt,934.8057pt)[below right,color=black]{length(): Int};
\draw[pstyle7] (1432.14pt,964.9076pt) ellipse (3pt and 3pt);
\node at (1441.14pt,953.8736pt)[below right,color=black]{lastLogTerm(): Long};
\draw[pstyle7] (1432.14pt,983.9755pt) ellipse (3pt and 3pt);
\node at (1441.14pt,972.9416pt)[below right,color=black]{appendEntries(newEntries: Log, prevLogIndex: Int): Log};
\draw[pstyle7] (1432.14pt,1003.0434pt) ellipse (3pt and 3pt);
\node at (1441.14pt,992.0095pt)[below right,color=black]{\underline{empty(): Log}};
\draw[pstyle3] (426.14pt,49.602pt) arc (180:270:5pt) -- (431.14pt,44.602pt) -- (1358.1073pt,44.602pt) arc (270:360:5pt) -- (1363.1073pt,49.602pt) -- (1363.1073pt,253.5573pt) arc (0:90:5pt) -- (1358.1073pt,258.5573pt) -- (431.14pt,258.5573pt) arc (90:180:5pt) -- (426.14pt,253.5573pt) -- cycle;
\draw[pstyle9] (848.7877pt,67.308pt) ellipse (11pt and 11pt);
\node at (848.7877pt,67.308pt)[]{\textbf{\Large S}};
\node at (873.9044pt,49.602pt)[below right,color=black]{\textit{\guillemotleft Singleton\guillemotright }};
\node at (869.2877pt,65.9461pt)[below right,color=black]{RaftServer};
\draw[pstyle5] (427.14pt,90.014pt) -- (1362.1073pt,90.014pt);
\node at (432.14pt,94.014pt)[below right,color=black]{timer: TimerScheduler[Command],};
\node at (432.14pt,113.0819pt)[below right,color=black]{context: ActorContext[Command],};
\node at (432.14pt,132.1498pt)[below right,color=black]{serverId: String,};
\node at (432.14pt,151.2178pt)[below right,color=black]{stateMachine: ActorRef[StateMachine.Command],};
\node at (432.14pt,170.2857pt)[below right,color=black]{s: RaftState,};
\draw[pstyle5] (427.14pt,193.3536pt) -- (1362.1073pt,193.3536pt);
\draw[pstyle7] (437.14pt,208.3876pt) ellipse (3pt and 3pt);
\node at (446.14pt,197.3536pt)[below right,color=black]{\underline{apply(serverId: String, stateMachine: ActorRef[StateMachine.Command], config: Configuration) : Behavior[Command]}};
\draw[color=plantucolor0005,fill=plantucolor0010,line width=1.0pt] (434.14pt,224.4555pt) rectangle (440.14pt,230.4555pt);
\node at (446.14pt,216.4215pt)[below right,color=black]{\underline{commandHandler(config: Configuration,}};
\node at (446.14pt,235.4894pt)[below right,color=black]{c: Command): ReplyEffect[Event, RaftState]};
\draw[pstyle1] (1398.14pt,120.102pt) -- (1398.14pt,147.602pt) -- (1363.57pt,151.602pt) -- (1398.14pt,155.602pt) -- (1398.14pt,183.22pt) -- (1662.974pt,183.22pt) -- (1662.974pt,130.102pt) -- (1652.974pt,120.102pt) -- (1398.14pt,120.102pt);
\draw[pstyle1] (1652.974pt,120.102pt) -- (1652.974pt,130.102pt) -- (1662.974pt,130.102pt) -- (1652.974pt,120.102pt);
\node at (1404.14pt,125.102pt)[below right,color=black]{The };
\node at (1433.8015pt,125.102pt)[below right,color=black]{\underline{apply}};
\node at (1473.1898pt,125.102pt)[below right,color=black]{ method is a static};
\node at (1404.14pt,142.808pt)[below right,color=black]{method which returns a persistent};
\node at (1404.14pt,160.514pt)[below right,color=black]{actor.};
\draw[pstyle3] (339.64pt,905.102pt) arc (180:270:5pt) -- (344.64pt,900.102pt) -- (445.1296pt,900.102pt) arc (270:360:5pt) -- (450.1296pt,905.102pt) -- (450.1296pt,943.102pt) arc (0:90:5pt) -- (445.1296pt,948.102pt) -- (344.64pt,948.102pt) arc (90:180:5pt) -- (339.64pt,943.102pt) -- cycle;
\draw[pstyle8] (354.64pt,916.102pt) ellipse (11pt and 11pt);
\node at (354.64pt,916.102pt)[]{\textbf{\Large I}};
\node at (368.64pt,906.568pt)[below right,color=black]{\textit{Command}};
\draw[pstyle5] (340.64pt,932.102pt) -- (449.1296pt,932.102pt);
\draw[pstyle5] (340.64pt,940.102pt) -- (449.1296pt,940.102pt);
\draw[pstyle3] (728.64pt,905.102pt) arc (180:270:5pt) -- (733.64pt,900.102pt) -- (834.1296pt,900.102pt) arc (270:360:5pt) -- (839.1296pt,905.102pt) -- (839.1296pt,943.102pt) arc (0:90:5pt) -- (834.1296pt,948.102pt) -- (733.64pt,948.102pt) arc (90:180:5pt) -- (728.64pt,943.102pt) -- cycle;
\draw[pstyle8] (743.64pt,916.102pt) ellipse (11pt and 11pt);
\node at (743.64pt,916.102pt)[]{\textbf{\Large I}};
\node at (757.64pt,906.568pt)[below right,color=black]{\textit{Command}};
\draw[pstyle5] (729.64pt,932.102pt) -- (838.1296pt,932.102pt);
\draw[pstyle5] (729.64pt,940.102pt) -- (838.1296pt,940.102pt);
\draw[pstyle12] (774.1542pt,948.102pt) -- (773.1267pt,969.2667pt) -- (760.1525pt,964.0064pt) -- cycle;
\draw[pstyle12] (766.6396pt,966.6365pt) -- (765.64pt,969.102pt);
\draw[pstyle12] (801.7459pt,900.102pt) -- (816.98pt,879.632pt);
\draw[pstyle12] (778.4097pt,900.102pt) -- (772.41pt,873.802pt);
\draw[pstyle3] (506.14pt,1080.602pt) arc (180:270:5pt) -- (511.14pt,1075.602pt) -- (648.34pt,1075.602pt) arc (270:360:5pt) -- (653.34pt,1080.602pt) -- (653.34pt,1118.602pt) arc (0:90:5pt) -- (648.34pt,1123.602pt) -- (511.14pt,1123.602pt) arc (90:180:5pt) -- (506.14pt,1118.602pt) -- cycle;
\draw[pstyle4] (521.14pt,1091.602pt) ellipse (11pt and 11pt);
\node at (521.14pt,1091.602pt)[]{\textbf{\Large C}};
\node at (535.14pt,1082.068pt)[below right,color=black]{AppendEntries};
\draw[pstyle5] (507.14pt,1107.602pt) -- (652.34pt,1107.602pt);
\draw[pstyle5] (507.14pt,1115.602pt) -- (652.34pt,1115.602pt);
\draw[pstyle3] (688.14pt,1080.602pt) arc (180:270:5pt) -- (693.14pt,1075.602pt) -- (902.3773pt,1075.602pt) arc (270:360:5pt) -- (907.3773pt,1080.602pt) -- (907.3773pt,1118.602pt) arc (0:90:5pt) -- (902.3773pt,1123.602pt) -- (693.14pt,1123.602pt) arc (90:180:5pt) -- (688.14pt,1118.602pt) -- cycle;
\draw[pstyle4] (703.14pt,1091.602pt) ellipse (11pt and 11pt);
\node at (703.14pt,1091.602pt)[]{\textbf{\Large C}};
\node at (717.14pt,1082.068pt)[below right,color=black]{AppendEntriesResponse};
\draw[pstyle5] (689.14pt,1107.602pt) -- (906.3773pt,1107.602pt);
\draw[pstyle5] (689.14pt,1115.602pt) -- (906.3773pt,1115.602pt);
\draw[pstyle3] (1118.14pt,905.102pt) arc (180:270:5pt) -- (1123.14pt,900.102pt) -- (1187.9184pt,900.102pt) arc (270:360:5pt) -- (1192.9184pt,905.102pt) -- (1192.9184pt,943.102pt) arc (0:90:5pt) -- (1187.9184pt,948.102pt) -- (1123.14pt,948.102pt) arc (90:180:5pt) -- (1118.14pt,943.102pt) -- cycle;
\draw[pstyle8] (1133.14pt,916.102pt) ellipse (11pt and 11pt);
\node at (1133.14pt,916.102pt)[]{\textbf{\Large I}};
\node at (1147.14pt,906.568pt)[below right,color=black]{\textit{Event}};
\draw[pstyle5] (1119.14pt,932.102pt) -- (1191.9184pt,932.102pt);
\draw[pstyle5] (1119.14pt,940.102pt) -- (1191.9184pt,940.102pt);
\draw[pstyle12] (1153.9883pt,948.102pt) -- (1159.6925pt,968.5094pt) -- (1145.7212pt,967.6124pt) -- cycle;
\draw[pstyle12] (1152.7068pt,968.0609pt) -- (1152.64pt,969.102pt);
\draw[pstyle12] (1132.5119pt,900.102pt) -- (1112.88pt,879.632pt);
\draw[pstyle12] (1150.0752pt,900.102pt) -- (1144.01pt,873.412pt);
\draw[pstyle12] (1166.546pt,900.102pt) -- (1178.21pt,874.692pt);
\draw[pstyle12] (1167.2846pt,900.102pt) -- (1179.76pt,874.632pt);
\draw[pstyle12] (1152.2187pt,900.102pt) -- (1148.54pt,873.432pt);
\draw[pstyle3] (942.14pt,1080.602pt) arc (180:270:5pt) -- (947.14pt,1075.602pt) -- (1083.6976pt,1075.602pt) arc (270:360:5pt) -- (1088.6976pt,1080.602pt) -- (1088.6976pt,1118.602pt) arc (0:90:5pt) -- (1083.6976pt,1123.602pt) -- (947.14pt,1123.602pt) arc (90:180:5pt) -- (942.14pt,1118.602pt) -- cycle;
\draw[pstyle4] (957.14pt,1091.602pt) ellipse (11pt and 11pt);
\node at (957.14pt,1091.602pt)[]{\textbf{\Large C}};
\node at (971.14pt,1082.068pt)[below right,color=black]{EntriesApplied};
\draw[pstyle5] (943.14pt,1107.602pt) -- (1087.6976pt,1107.602pt);
\draw[pstyle5] (943.14pt,1115.602pt) -- (1087.6976pt,1115.602pt);
\draw[pstyle3] (1124.64pt,1080.602pt) arc (180:270:5pt) -- (1129.64pt,1075.602pt) -- (1383.445pt,1075.602pt) arc (270:360:5pt) -- (1388.445pt,1080.602pt) -- (1388.445pt,1118.602pt) arc (0:90:5pt) -- (1383.445pt,1123.602pt) -- (1129.64pt,1123.602pt) arc (90:180:5pt) -- (1124.64pt,1118.602pt) -- cycle;
\draw[pstyle4] (1139.64pt,1091.602pt) ellipse (11pt and 11pt);
\node at (1139.64pt,1091.602pt)[]{\textbf{\Large C}};
\node at (1153.64pt,1082.068pt)[below right,color=black]{AppendEntriesResponseEvent};
\draw[pstyle5] (1125.64pt,1107.602pt) -- (1387.445pt,1107.602pt);
\draw[pstyle5] (1125.64pt,1115.602pt) -- (1387.445pt,1115.602pt);
\draw[pstyle3] (1755.14pt,690.602pt) arc (180:270:5pt) -- (1760.14pt,685.602pt) -- (1854.6924pt,685.602pt) arc (270:360:5pt) -- (1859.6924pt,690.602pt) -- (1859.6924pt,728.602pt) arc (0:90:5pt) -- (1854.6924pt,733.602pt) -- (1760.14pt,733.602pt) arc (90:180:5pt) -- (1755.14pt,728.602pt) -- cycle;
\draw[pstyle4] (1770.14pt,701.602pt) ellipse (11pt and 11pt);
\node at (1770.14pt,701.602pt)[]{\textbf{\Large C}};
\node at (1784.14pt,692.068pt)[below right,color=black]{LogEntry};
\draw[pstyle5] (1756.14pt,717.602pt) -- (1858.6924pt,717.602pt);
\draw[pstyle5] (1756.14pt,725.602pt) -- (1858.6924pt,725.602pt);
\draw[pstyle3] (1210.64pt,386.602pt) arc (180:270:5pt) -- (1215.64pt,381.602pt) -- (1633.4441pt,381.602pt) arc (270:360:5pt) -- (1638.4441pt,386.602pt) -- (1638.4441pt,558.0774pt) arc (0:90:5pt) -- (1633.4441pt,563.0774pt) -- (1215.64pt,563.0774pt) arc (90:180:5pt) -- (1210.64pt,558.0774pt) -- cycle;
\draw[pstyle8] (1385.5022pt,397.602pt) ellipse (11pt and 11pt);
\node at (1385.5022pt,397.602pt)[]{\textbf{\Large I}};
\node at (1406.0022pt,388.068pt)[below right,color=black]{\textit{RaftState}};
\draw[pstyle5] (1211.64pt,413.602pt) -- (1637.4441pt,413.602pt);
\node at (1216.64pt,417.602pt)[below right,color=black]{Log: LogEntry[]};
\node at (1216.64pt,436.6699pt)[below right,color=black]{currentTerm: Long};
\node at (1216.64pt,455.7378pt)[below right,color=black]{votedFor: Option\textless String\textgreater };
\node at (1216.64pt,474.8057pt)[below right,color=black]{log: Log};
\node at (1216.64pt,493.8736pt)[below right,color=black]{commitIndex: Long};
\node at (1216.64pt,512.9416pt)[below right,color=black]{lastApplied: Long};
\draw[pstyle5] (1211.64pt,536.0095pt) -- (1637.4441pt,536.0095pt);
\draw[pstyle7] (1221.64pt,551.0434pt) ellipse (3pt and 3pt);
\node at (1230.64pt,540.0095pt)[below right,color=black]{applyEvent(state: RaftState, event: Event): RaftState};
\draw[pstyle12] (1442.483pt,563.0774pt) -- (1453.2294pt,581.3398pt) -- (1439.4953pt,584.0553pt) -- cycle;
\draw[pstyle12] (1446.3623pt,582.6976pt) -- (1446.64pt,584.102pt);
\draw[pstyle12] (1289.7145pt,381.602pt) -- (1254.35pt,357.802pt);
\draw[pstyle3] (1150.64pt,671.602pt) arc (180:270:5pt) -- (1155.64pt,666.602pt) -- (1414.0343pt,666.602pt) arc (270:360:5pt) -- (1419.0343pt,671.602pt) -- (1419.0343pt,747.7378pt) arc (0:90:5pt) -- (1414.0343pt,752.7378pt) -- (1155.64pt,752.7378pt) arc (90:180:5pt) -- (1150.64pt,747.7378pt) -- cycle;
\draw[pstyle4] (1253.4084pt,682.602pt) ellipse (11pt and 11pt);
\node at (1253.4084pt,682.602pt)[]{\textbf{\Large C}};
\node at (1273.9084pt,673.068pt)[below right,color=black]{Leader};
\draw[pstyle5] (1151.64pt,698.602pt) -- (1418.0343pt,698.602pt);
\draw[pstyle10] (1161.64pt,713.6359pt) ellipse (3pt and 3pt);
\node at (1170.64pt,702.602pt)[below right,color=black]{matchIndex: Map[String, Long]};
\draw[pstyle10] (1161.64pt,732.7039pt) ellipse (3pt and 3pt);
\node at (1170.64pt,721.6699pt)[below right,color=black]{nextIndex: Map[String, Long]};
\draw[pstyle5] (1151.64pt,744.7378pt) -- (1418.0343pt,744.7378pt);
\draw[pstyle3] (1598.64pt,690.602pt) arc (180:270:5pt) -- (1603.64pt,685.602pt) -- (1693.9986pt,685.602pt) arc (270:360:5pt) -- (1698.9986pt,690.602pt) -- (1698.9986pt,728.602pt) arc (0:90:5pt) -- (1693.9986pt,733.602pt) -- (1603.64pt,733.602pt) arc (90:180:5pt) -- (1598.64pt,728.602pt) -- cycle;
\draw[pstyle4] (1613.64pt,701.602pt) ellipse (11pt and 11pt);
\node at (1613.64pt,701.602pt)[]{\textbf{\Large C}};
\node at (1627.64pt,692.068pt)[below right,color=black]{Follower};
\draw[pstyle5] (1599.64pt,717.602pt) -- (1697.9986pt,717.602pt);
\draw[pstyle5] (1599.64pt,725.602pt) -- (1697.9986pt,725.602pt);
\draw[pstyle3] (1453.64pt,690.602pt) arc (180:270:5pt) -- (1458.64pt,685.602pt) -- (1559.0635pt,685.602pt) arc (270:360:5pt) -- (1564.0635pt,690.602pt) -- (1564.0635pt,728.602pt) arc (0:90:5pt) -- (1559.0635pt,733.602pt) -- (1458.64pt,733.602pt) arc (90:180:5pt) -- (1453.64pt,728.602pt) -- cycle;
\draw[pstyle4] (1468.64pt,701.602pt) ellipse (11pt and 11pt);
\node at (1468.64pt,701.602pt)[]{\textbf{\Large C}};
\node at (1482.64pt,692.068pt)[below right,color=black]{Candidate};
\draw[pstyle5] (1454.64pt,717.602pt) -- (1563.0635pt,717.602pt);
\draw[pstyle5] (1454.64pt,725.602pt) -- (1563.0635pt,725.602pt);
\draw[pstyle13] (922.94pt,741.502pt) ..controls (895.04pt,777.872pt) and (848.51pt,838.522pt) .. (816.98pt,879.632pt);
\draw[pstyle13] (865.34pt,741.462pt) ..controls (832.74pt,753.262pt) and (794.66pt,766.342pt) .. (759.64pt,776.602pt) ..controls (709.26pt,791.362pt) and (695.98pt,792.612pt) .. (644.64pt,803.602pt) ..controls (576.03pt,818.292pt) and (552.09pt,801.612pt) .. (489.64pt,833.602pt) ..controls (458.38pt,849.612pt) and (430.15pt,879.042pt) .. (412.74pt,899.782pt);
\draw[pstyle13] (977.03pt,741.502pt) ..controls (1012.81pt,777.872pt) and (1072.46pt,838.522pt) .. (1112.88pt,879.632pt);
\draw[pstyle12] (1813.53pt,734.062pt) ..controls (1817.18pt,753.692pt) and (1819.36pt,781.882pt) .. (1808.64pt,803.602pt) ..controls (1805.55pt,809.872pt) and (1801.95pt,815.902pt) .. (1797.95pt,821.682pt);
\draw[pstyle12] (1790.12pt,832.022pt) -- (1796.9331pt,829.6594pt) -- (1797.3726pt,822.4617pt) -- (1790.5596pt,824.8243pt) -- (1790.12pt,832.022pt) -- cycle;
\node at (1806.0651pt,741.7656pt)[below right,color=black]{1};
\node at (1776.5509pt,808.0125pt)[below right,color=black]{0..*};
\draw[pstyle13] (574.59pt,750.072pt) ..controls (530.69pt,792.292pt) and (462.19pt,858.152pt) .. (423.6pt,895.252pt);
\draw[pstyle14] (420.14pt,898.582pt) -- (429.3951pt,895.2141pt) -- (423.7392pt,895.1113pt) -- (423.8421pt,889.4554pt) -- (420.14pt,898.582pt) -- cycle;
\draw[pstyle15] (546.2442pt,790.9895pt) -- (537.6872pt,795.1402pt) -- (541.7611pt,799.3771pt) -- (546.2442pt,790.9895pt) -- cycle;
\node at (551.64pt,785.602pt)[below right,color=black]{Received by};
\node at (542.9178pt,758.2014pt)[below right,color=black]{0..*};
\node at (416.2686pt,874.2739pt)[below right,color=black]{1};
\draw[pstyle12] (765.64pt,969.102pt) ..controls (765.64pt,969.102pt) and (666.92pt,1037.832pt) .. (613.32pt,1075.152pt);
\draw[pstyle12] (765.64pt,969.102pt) ..controls (765.64pt,969.102pt) and (782.62pt,1037.832pt) .. (791.85pt,1075.152pt);
\draw[pstyle12] (1152.64pt,969.102pt) ..controls (1152.64pt,969.102pt) and (1079.93pt,1037.832pt) .. (1040.45pt,1075.152pt);
\draw[pstyle12] (1152.64pt,969.102pt) ..controls (1152.64pt,969.102pt) and (1207.84pt,1037.832pt) .. (1237.81pt,1075.152pt);
\draw[pstyle12] (1446.64pt,584.102pt) ..controls (1446.64pt,584.102pt) and (1386.87pt,630.042pt) .. (1339.94pt,666.102pt);
\draw[pstyle12] (1446.64pt,584.102pt) ..controls (1446.64pt,584.102pt) and (1527.92pt,603.232pt) .. (1581.64pt,639.602pt) ..controls (1600.31pt,652.242pt) and (1617.92pt,670.732pt) .. (1630.4pt,685.402pt);
\draw[pstyle12] (1446.64pt,584.102pt) ..controls (1446.64pt,584.102pt) and (1479.02pt,649.122pt) .. (1496.98pt,685.182pt);
\draw[pstyle13] (1184.11pt,753.092pt) ..controls (1172.77pt,761.892pt) and (1162.76pt,772.312pt) .. (1155.64pt,784.602pt) ..controls (1140.29pt,811.102pt) and (1140.21pt,845.522pt) .. (1144.01pt,873.412pt);
\draw[pstyle14] (1144.71pt,878.122pt) -- (1147.3548pt,868.6349pt) -- (1143.9809pt,873.1754pt) -- (1139.4403pt,869.8015pt) -- (1144.71pt,878.122pt) -- cycle;
\draw[pstyle15] (1159.0591pt,799.1985pt) -- (1164.7071pt,791.5467pt) -- (1159.1308pt,789.6882pt) -- (1159.0591pt,799.1985pt) -- cycle;
\node at (1169.64pt,785.602pt)[below right,color=black]{consumes};
\node at (1144.6413pt,760.7699pt)[below right,color=black]{0..*};
\node at (1134.6467pt,854.2346pt)[below right,color=black]{1};
\draw[pstyle13] (1642.57pt,733.702pt) ..controls (1635.46pt,755.702pt) and (1621.4pt,787.732pt) .. (1596.64pt,803.602pt) ..controls (1525.51pt,849.192pt) and (1290.88pt,791.482pt) .. (1217.64pt,833.602pt) ..controls (1201.15pt,843.082pt) and (1188.05pt,858.942pt) .. (1178.21pt,874.692pt);
\draw[pstyle14] (1175.78pt,878.732pt) -- (1183.8543pt,873.0923pt) -- (1178.363pt,874.4508pt) -- (1177.0044pt,868.9595pt) -- (1175.78pt,878.732pt) -- cycle;
\draw[pstyle15] (1614.8557pt,795.9076pt) -- (1624.3644pt,796.0919pt) -- (1622.6568pt,790.4676pt) -- (1614.8557pt,795.9076pt) -- cycle;
\node at (1628.64pt,785.602pt)[below right,color=black]{consumes};
\node at (1615.268pt,741.7343pt)[below right,color=black]{0..*};
\node at (1169.5955pt,854.3719pt)[below right,color=black]{1};
\draw[pstyle13] (1489.29pt,733.982pt) ..controls (1475.98pt,748.502pt) and (1457.08pt,766.292pt) .. (1436.64pt,776.602pt) ..controls (1420.06pt,784.962pt) and (1413.25pt,778.712pt) .. (1395.64pt,784.602pt) ..controls (1377.36pt,790.722pt) and (1374.86pt,797.302pt) .. (1356.64pt,803.602pt) ..controls (1296.91pt,824.262pt) and (1270.2pt,798.502pt) .. (1217.64pt,833.602pt) ..controls (1202.25pt,843.882pt) and (1189.56pt,859.392pt) .. (1179.76pt,874.632pt);
\draw[pstyle14] (1177.34pt,878.492pt) -- (1185.507pt,872.9874pt) -- (1179.9938pt,874.2544pt) -- (1178.7268pt,868.7413pt) -- (1177.34pt,878.492pt) -- cycle;
\draw[pstyle15] (1396.0879pt,796.5235pt) -- (1405.5385pt,795.4572pt) -- (1403.1069pt,790.1059pt) -- (1396.0879pt,796.5235pt) -- cycle;
\node at (1409.64pt,785.602pt)[below right,color=black]{consumes};
\node at (1459.1301pt,741.6671pt)[below right,color=black]{0..*};
\node at (1180.558pt,854.4201pt)[below right,color=black]{1};
\draw[pstyle12] (1264.76pt,766.872pt) ..controls (1263.5pt,780.042pt) and (1265.38pt,793.242pt) .. (1273.64pt,803.602pt) ..controls (1310.86pt,850.312pt) and (1347.33pt,816.762pt) .. (1404.64pt,833.602pt) ..controls (1410.02pt,835.182pt) and (1415.45pt,836.812pt) .. (1420.92pt,838.492pt);
\draw[pstyle12] (1266.97pt,754.222pt) -- (1262.0001pt,759.447pt) -- (1264.9117pt,766.0441pt) -- (1269.8816pt,760.8192pt) -- (1266.97pt,754.222pt) -- cycle;
\draw[pstyle15] (1283.1848pt,796.5394pt) -- (1276.1883pt,790.0973pt) -- (1273.738pt,795.4401pt) -- (1283.1848pt,796.5394pt) -- cycle;
\node at (1287.64pt,785.602pt)[below right,color=black]{contains};
\draw[pstyle12] (1691.77pt,743.292pt) ..controls (1703.75pt,754.882pt) and (1715.23pt,768.972pt) .. (1721.64pt,784.602pt) ..controls (1728.22pt,800.632pt) and (1727.1pt,817.382pt) .. (1721.75pt,833.462pt);
\draw[pstyle12] (1682.34pt,734.792pt) -- (1684.1205pt,741.7798pt) -- (1691.2556pt,742.8239pt) -- (1689.4751pt,735.8361pt) -- (1682.34pt,734.792pt) -- cycle;
\draw[pstyle15] (1732.2175pt,799.1996pt) -- (1732.1526pt,789.6893pt) -- (1726.5749pt,791.5437pt) -- (1732.2175pt,799.1996pt) -- cycle;
\node at (1739.64pt,785.602pt)[below right,color=black]{contains};
\draw[pstyle12] (1506.1pt,748.572pt) ..controls (1506.45pt,766.162pt) and (1509.09pt,786.832pt) .. (1517.64pt,803.602pt) ..controls (1522.97pt,814.062pt) and (1529.64pt,824.022pt) .. (1537.13pt,833.402pt);
\draw[pstyle12] (1506.29pt,735.592pt) -- (1502.2047pt,741.5342pt) -- (1506.1186pt,747.5908pt) -- (1510.2039pt,741.6485pt) -- (1506.29pt,735.592pt) -- cycle;
\draw[pstyle15] (1524.3576pt,799.1507pt) -- (1524.0105pt,789.6465pt) -- (1518.4903pt,791.6657pt) -- (1524.3576pt,799.1507pt) -- cycle;
\node at (1531.64pt,785.602pt)[below right,color=black]{contains};
\draw[pstyle12] (87.62pt,755.092pt) ..controls (91.56pt,799.162pt) and (97.44pt,864.922pt) .. (100.54pt,899.662pt);
\draw[pstyle12] (80.65pt,755.802pt) -- (85.84pt,735.252pt) -- (94.6pt,754.552pt) -- (80.65pt,755.802pt) -- cycle;
\draw[pstyle12] (316.16pt,540.982pt) ..controls (246.69pt,575.642pt) and (171.58pt,615.472pt) .. (141.64pt,639.602pt) ..controls (125.43pt,652.662pt) and (110.41pt,670.772pt) .. (99.72pt,685.172pt);
\draw[pstyle12] (327.7pt,535.252pt) -- (320.5477pt,534.3329pt) -- (316.9485pt,540.5816pt) -- (324.1008pt,541.5006pt) -- (327.7pt,535.252pt) -- cycle;
\draw[pstyle13] (1089.71pt,259.012pt) ..controls (1122.3pt,277.502pt) and (1155.59pt,296.822pt) .. (1186.64pt,315.602pt) ..controls (1208.73pt,328.962pt) and (1231.73pt,343.352pt) .. (1254.35pt,357.802pt);
\draw[pstyle14] (1258.5pt,360.462pt) -- (1253.0599pt,352.2519pt) -- (1254.2835pt,357.7748pt) -- (1248.7605pt,358.9983pt) -- (1258.5pt,360.462pt) -- cycle;
\node at (1171.64pt,289.602pt)[below right,color=black]{contains};
\draw[pstyle13] (901.37pt,259.102pt) ..controls (902.31pt,277.912pt) and (903.14pt,297.332pt) .. (903.64pt,315.602pt) ..controls (906.91pt,434.222pt) and (964.6pt,480.792pt) .. (903.64pt,582.602pt) ..controls (876.16pt,628.492pt) and (826.17pt,594.352pt) .. (797.64pt,639.602pt) ..controls (752.67pt,710.932pt) and (761.56pt,813.582pt) .. (772.41pt,873.802pt);
\draw[pstyle14] (773.25pt,878.362pt) -- (775.5633pt,868.7886pt) -- (772.3493pt,873.4438pt) -- (767.6941pt,870.2298pt) -- (773.25pt,878.362pt) -- cycle;
\draw[pstyle15] (847.6666pt,617.5615pt) -- (842.9331pt,625.8105pt) -- (848.6858pt,627.0173pt) -- (847.6666pt,617.5615pt) -- cycle;
\node at (855.64pt,613.602pt)[below right,color=black]{is received by};
\node at (878.0719pt,266.5573pt)[below right,color=black]{0..*};
\node at (763.2741pt,854.5012pt)[below right,color=black]{1};
\draw[pstyle13] (915.29pt,259.052pt) ..controls (942.21pt,392.572pt) and (989.18pt,607.132pt) .. (1017.64pt,631.602pt) ..controls (1044.4pt,654.612pt) and (1070.42pt,615.982pt) .. (1096.64pt,639.602pt) ..controls (1113.92pt,655.172pt) and (1137.05pt,796.362pt) .. (1148.54pt,873.432pt);
\draw[pstyle14] (1149.26pt,878.272pt) -- (1151.9048pt,868.7849pt) -- (1148.5309pt,873.3254pt) -- (1143.9903pt,869.9515pt) -- (1149.26pt,878.272pt) -- cycle;
\draw[pstyle15] (1020.8653pt,617.7805pt) -- (1021.3282pt,627.2798pt) -- (1026.8233pt,625.1936pt) -- (1020.8653pt,617.7805pt) -- cycle;
\node at (1031.64pt,613.602pt)[below right,color=black]{is produced by};
\node at (917.3571pt,266.5041pt)[below right,color=black]{0..*};
\node at (1149.1853pt,854.4085pt)[below right,color=black]{1};
\draw[pstyle13] (425.8pt,249.412pt) ..controls (410.57pt,252.512pt) and (395.48pt,255.582pt) .. (380.64pt,258.602pt) ..controls (254.05pt,284.312pt) and (179.05pt,216.962pt) .. (95.64pt,315.602pt) ..controls (6pt,421.602pt) and (51.21pt,607.192pt) .. (73.58pt,679.032pt);
\draw[pstyle14] (75.09pt,683.782pt) -- (76.1801pt,673.9936pt) -- (73.5775pt,679.0162pt) -- (68.5549pt,676.4136pt) -- (75.09pt,683.782pt) -- cycle;
\draw[pstyle15] (97.47pt,476.3216pt) -- (105.4774pt,471.1901pt) -- (100.9319pt,467.4635pt) -- (97.47pt,476.3216pt) -- cycle;
\node at (109.64pt,463.602pt)[below right,color=black]{sends messages to};
\node at (394.5462pt,233.9534pt)[below right,color=black]{0..*};
\node at (64.5512pt,659.8869pt)[below right,color=black]{1};
\draw[pstyle13] (712.7pt,258.942pt) ..controls (697.93pt,268.672pt) and (683.41pt,278.622pt) .. (669.64pt,288.602pt) ..controls (619.94pt,324.632pt) and (567.64pt,369.572pt) .. (527.42pt,405.832pt);
\draw[pstyle14] (524.19pt,408.752pt) -- (533.5431pt,405.6667pt) -- (527.8929pt,405.3922pt) -- (528.1674pt,399.742pt) -- (524.19pt,408.752pt) -- cycle;
\draw[pstyle15] (670.7219pt,301.5612pt) -- (679.6356pt,298.245pt) -- (675.984pt,293.639pt) -- (670.7219pt,301.5612pt) -- cycle;
\node at (683.64pt,289.602pt)[below right,color=black]{holds};
\node at (692.8021pt,266.387pt)[below right,color=black]{1};
\draw[pstyle13] (796.65pt,258.722pt) ..controls (782.93pt,276.852pt) and (770.01pt,296.142pt) .. (759.64pt,315.602pt) ..controls (701.43pt,424.812pt) and (726.77pt,467.772pt) .. (680.64pt,582.602pt) ..controls (669.51pt,610.302pt) and (654.34pt,640.032pt) .. (641.45pt,663.662pt);
\draw[pstyle14] (639.13pt,667.892pt) -- (646.9744pt,661.9367pt) -- (641.5412pt,663.5118pt) -- (639.9661pt,658.0787pt) -- (639.13pt,667.892pt) -- cycle;
\draw[pstyle15] (762.8506pt,477.1238pt) -- (768.8319pt,469.7296pt) -- (763.3434pt,467.626pt) -- (762.8506pt,477.1238pt) -- cycle;
\node at (773.64pt,463.602pt)[below right,color=black]{sends messages to};
\node at (781.8121pt,266.5154pt)[below right,color=black]{1};
\end{tikzpicture}
\end{document}
