<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1020px" preserveAspectRatio="none" style="width:1281px;height:1020px;background:#FFFFFF;" version="1.1" viewBox="0 0 1281 1020" width="1281px" zoomAndPan="magnify"><defs/><g><!--MD5=[f4140d8ccf106ac44d26417018d129ed]
cluster com.telegraft.rafktor--><g id="cluster_com.telegraft.rafktor"><path d="M8.5,7.188 L180.5,7.188 A3.75,3.75 0 0 1 183,9.688 L190,34.9801 L1271.5,34.9801 A2.5,2.5 0 0 1 1274,37.4801 L1274,1010.688 A2.5,2.5 0 0 1 1271.5,1013.188 L8.5,1013.188 A2.5,2.5 0 0 1 6,1010.688 L6,9.688 A2.5,2.5 0 0 1 8.5,7.188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="6" x2="190" y1="34.9801" y2="34.9801"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="171" x="10" y="26.292">com.telegraft.rafktor</text></g><!--MD5=[a38c2518b9a9e3646e37048027339f17]
cluster Log--><g id="cluster_Log"><path d="M194.5,601.188 L224.5,601.188 A3.75,3.75 0 0 1 227,603.688 L234,628.9801 L321.5,628.9801 A2.5,2.5 0 0 1 324,631.4801 L324,702.688 A2.5,2.5 0 0 1 321.5,705.188 L194.5,705.188 A2.5,2.5 0 0 1 192,702.688 L192,603.688 A2.5,2.5 0 0 1 194.5,601.188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="192" x2="234" y1="628.9801" y2="628.9801"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="29" x="196" y="620.292">Log</text></g><!--MD5=[bd66c3e5a15dc40bf7026992665c599f]
cluster RaftState--><g id="cluster_RaftState"><path d="M350.5,251.188 L427.5,251.188 A3.75,3.75 0 0 1 430,253.688 L437,278.9801 L914.5,278.9801 A2.5,2.5 0 0 1 917,281.4801 L917,724.688 A2.5,2.5 0 0 1 914.5,727.188 L350.5,727.188 A2.5,2.5 0 0 1 348,724.688 L348,253.688 A2.5,2.5 0 0 1 350.5,251.188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="348" x2="437" y1="278.9801" y2="278.9801"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="76" x="352" y="270.292">RaftState</text></g><!--MD5=[9637f819ccb2d1556332eb4842cfeb44]
cluster StateMachine--><g id="cluster_StateMachine"><path d="M32.5,601.188 L144.5,601.188 A3.75,3.75 0 0 1 147,603.688 L154,628.9801 L165.5,628.9801 A2.5,2.5 0 0 1 168,631.4801 L168,702.688 A2.5,2.5 0 0 1 165.5,705.188 L32.5,705.188 A2.5,2.5 0 0 1 30,702.688 L30,603.688 A2.5,2.5 0 0 1 32.5,601.188 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="30" x2="154" y1="628.9801" y2="628.9801"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="111" x="34" y="620.292">StateMachine</text></g><!--MD5=[e13d1005b82dbd09626ef637a72c2adb]
cluster RaftServer--><g id="cluster_RaftServer"><path d="M817.5,832.688 L902.5,832.688 A3.75,3.75 0 0 1 905,835.188 L912,860.4801 L1054.5,860.4801 A2.5,2.5 0 0 1 1057,862.9801 L1057,934.188 A2.5,2.5 0 0 1 1054.5,936.688 L817.5,936.688 A2.5,2.5 0 0 1 815,934.188 L815,835.188 A2.5,2.5 0 0 1 817.5,832.688 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="815" x2="912" y1="860.4801" y2="860.4801"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="84" x="819" y="851.792">RaftServer</text></g><!--MD5=[063d74e43144aaa0d0cf3aecd3794497]
class Log--><g id="elem_Log"><rect codeLine="12" fill="#F1F1F1" height="200.5443" id="Log" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="445" x="74.5" y="796.188"/><ellipse cx="278.75" cy="812.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M278.3594,818.3443 Q276.7188,818.3443 275.6563,817.6568 Q274.5938,816.9536 274.0625,815.688 Q273.5469,814.4068 273.5469,812.7193 Q273.5469,810.813 274.1563,809.4536 Q274.7813,808.0786 275.9844,807.3443 Q277.2031,806.6099 278.9531,806.6099 Q279.7969,806.6099 280.4219,806.7818 Q281.0469,806.938 281.7031,807.2661 L280.9375,809.1568 Q280.3438,808.8599 279.8438,808.7505 Q279.3438,808.6411 278.875,808.6411 Q277.7813,808.6411 277.125,809.1411 Q276.4688,809.6255 276.1875,810.5318 Q275.9063,811.4224 275.9063,812.6255 Q275.9063,814.5005 276.5781,815.4068 Q277.25,816.313 278.75,816.313 Q279.3125,816.313 279.8906,816.1724 Q280.4844,816.0318 281.2656,815.6724 L281.2656,817.7505 Q280.5781,818.063 279.8281,818.2036 Q279.0938,818.3443 278.3594,818.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="28" x="299.25" y="818.396">Log</text><line style="stroke:#181818;stroke-width:0.5;" x1="75.5" x2="518.5" y1="828.188" y2="828.188"/><ellipse cx="85.5" cy="844.584" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="213" x="94.5" y="849.292">logEntries: Vector[LogEntry]</text><line style="stroke:#181818;stroke-width:0.5;" x1="75.5" x2="518.5" y1="857.9801" y2="857.9801"/><ellipse cx="85.5" cy="874.3761" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="287" x="94.5" y="879.0841">Log(logEntries: Vector[LogEntry]): Log</text><ellipse cx="85.5" cy="896.1681" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="197" x="94.5" y="900.8761">apply(index: Int): LogEntry</text><ellipse cx="85.5" cy="917.9602" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="88" x="94.5" y="922.6682">length(): Int</text><ellipse cx="85.5" cy="939.7522" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="151" x="94.5" y="944.4602">lastLogTerm(): Long</text><ellipse cx="85.5" cy="961.5442" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="419" x="94.5" y="966.2523">appendEntries(newEntries: Log, prevLogIndex: Int): Log</text><ellipse cx="85.5" cy="983.3363" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" text-decoration="underline" textLength="94" x="94.5" y="988.0443">empty(): Log</text></g><!--MD5=[9b7eb76f801c309757ef5968cb2349d9]
class Configuration--><g id="elem_Configuration"><rect codeLine="42" fill="#F1F1F1" height="135.1682" id="Configuration" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="400" x="858" y="47.188"/><ellipse cx="1000.75" cy="63.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1000.3594,69.3443 Q998.7188,69.3443 997.6563,68.6568 Q996.5938,67.9536 996.0625,66.688 Q995.5469,65.4068 995.5469,63.7193 Q995.5469,61.813 996.1563,60.4536 Q996.7813,59.0786 997.9844,58.3443 Q999.2031,57.6099 1000.9531,57.6099 Q1001.7969,57.6099 1002.4219,57.7818 Q1003.0469,57.938 1003.7031,58.2661 L1002.9375,60.1568 Q1002.3438,59.8599 1001.8438,59.7505 Q1001.3438,59.6411 1000.875,59.6411 Q999.7813,59.6411 999.125,60.1411 Q998.4688,60.6255 998.1875,61.5318 Q997.9063,62.4224 997.9063,63.6255 Q997.9063,65.5005 998.5781,66.4068 Q999.25,67.313 1000.75,67.313 Q1001.3125,67.313 1001.8906,67.1724 Q1002.4844,67.0318 1003.2656,66.6724 L1003.2656,68.7505 Q1002.5781,69.063 1001.8281,69.2036 Q1001.0938,69.3443 1000.3594,69.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="106" x="1021.25" y="69.396">Configuration</text><line style="stroke:#181818;stroke-width:0.5;" x1="859" x2="1257" y1="79.188" y2="79.188"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="866" y="92.584"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="144" x="878" y="100.292">servers: Set[String]</text><line style="stroke:#181818;stroke-width:0.5;" x1="859" x2="1257" y1="108.9801" y2="108.9801"/><ellipse cx="869" cy="125.3761" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="374" x="878" y="130.0841">Configuration(servers: Set[String]): Configuration</text><ellipse cx="869" cy="147.1681" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="229" x="878" y="151.8761">getConfiguration(): Set[String]</text><ellipse cx="869" cy="168.9602" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="240" x="878" y="173.6682">getServer(server: String): String</text></g><!--MD5=[c60af77fe5573b84a4aa4bce89659574]
class Server--><g id="elem_Server"><rect codeLine="49" fill="#F1F1F1" height="48" id="Server" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="75" x="1156.5" y="387.688"/><ellipse cx="1171.5" cy="403.688" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1168.4375,409.688 L1168.4375,408.0943 L1170.6563,407.8286 L1170.6563,400.1255 L1168.4375,399.8599 L1168.4375,398.2661 L1175.1563,398.2661 L1175.1563,399.8599 L1172.8906,400.1255 L1172.8906,407.8286 L1175.1563,408.0943 L1175.1563,409.688 L1168.4375,409.688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="43" x="1185.5" y="409.896">Server</text><line style="stroke:#181818;stroke-width:0.5;" x1="1157.5" x2="1230.5" y1="419.688" y2="419.688"/><line style="stroke:#181818;stroke-width:0.5;" x1="1157.5" x2="1230.5" y1="427.688" y2="427.688"/></g><!--MD5=[3626c233e602113c8cf5977cfac9c02f]
class StateMachine--><g id="elem_StateMachine"><rect codeLine="55" fill="#F1F1F1" height="91.3761" id="StateMachine" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="241" x="55.5" y="366.188"/><ellipse cx="119.75" cy="392.9801" fill="#FF7700" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M118.6563,399.1363 Q117.7813,399.1363 116.9375,398.9801 Q116.1094,398.8082 115.375,398.4488 L115.375,396.3394 Q116.2656,396.7926 117.0938,397.0113 Q117.9375,397.2144 118.7188,397.2144 Q119.5469,397.2144 120.0781,396.9488 Q120.6094,396.6676 120.6094,395.9176 Q120.6094,395.4176 120.3281,395.1363 Q120.0469,394.8394 119.5156,394.5738 Q118.9844,394.3082 118.25,393.9176 Q117.5156,393.5269 116.9063,393.0582 Q116.2969,392.5894 115.9375,391.9644 Q115.5938,391.3394 115.5938,390.4332 Q115.5938,388.9019 116.625,388.1519 Q117.6563,387.4019 119.3438,387.4019 Q120.0156,387.4019 120.9375,387.5582 Q121.8594,387.6988 122.7656,388.1363 L122.0313,389.9332 Q121.2344,389.6051 120.5938,389.4644 Q119.9688,389.3238 119.4688,389.3238 Q118.6875,389.3238 118.3281,389.6363 Q117.9688,389.9488 117.9688,390.5426 Q117.9688,391.0113 118.1875,391.3082 Q118.4063,391.5894 118.8594,391.8238 Q119.3125,392.0582 120,392.4019 Q120.9375,392.8707 121.5938,393.3082 Q122.2656,393.7457 122.6094,394.3238 Q122.9688,394.9019 122.9688,395.7926 Q122.9688,396.9019 122.4219,397.6519 Q121.8906,398.3863 120.9219,398.7613 Q119.9531,399.1363 118.6563,399.1363 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="81" x="151.75" y="388.292">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="104" x="140.25" y="410.0841">StateMachine</text><line style="stroke:#181818;stroke-width:0.5;" x1="56.5" x2="295.5" y1="419.7721" y2="419.7721"/><line style="stroke:#181818;stroke-width:0.5;" x1="56.5" x2="295.5" y1="427.7721" y2="427.7721"/><ellipse cx="66.5" cy="444.1681" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" text-decoration="underline" textLength="215" x="75.5" y="448.8761">apply(): Behavior[Command]</text></g><!--MD5=[1d8340d1c3ce57a515dba582cdd880ea]
class RaftServer--><g id="elem_RaftServer"><rect codeLine="64" fill="#F1F1F1" height="113.1682" id="RaftServer" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="409" x="354.5" y="58.188"/><ellipse cx="514.75" cy="84.9801" fill="#FF7700" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M513.6563,91.1363 Q512.7813,91.1363 511.9375,90.9801 Q511.1094,90.8082 510.375,90.4488 L510.375,88.3394 Q511.2656,88.7926 512.0938,89.0113 Q512.9375,89.2144 513.7188,89.2144 Q514.5469,89.2144 515.0781,88.9488 Q515.6094,88.6676 515.6094,87.9176 Q515.6094,87.4176 515.3281,87.1363 Q515.0469,86.8394 514.5156,86.5738 Q513.9844,86.3082 513.25,85.9176 Q512.5156,85.5269 511.9063,85.0582 Q511.2969,84.5894 510.9375,83.9644 Q510.5938,83.3394 510.5938,82.4332 Q510.5938,80.9019 511.625,80.1519 Q512.6563,79.4019 514.3438,79.4019 Q515.0156,79.4019 515.9375,79.5582 Q516.8594,79.6988 517.7656,80.1363 L517.0313,81.9332 Q516.2344,81.6051 515.5938,81.4644 Q514.9688,81.3238 514.4688,81.3238 Q513.6875,81.3238 513.3281,81.6363 Q512.9688,81.9488 512.9688,82.5426 Q512.9688,83.0113 513.1875,83.3082 Q513.4063,83.5894 513.8594,83.8238 Q514.3125,84.0582 515,84.4019 Q515.9375,84.8707 516.5938,85.3082 Q517.2656,85.7457 517.6094,86.3238 Q517.9688,86.9019 517.9688,87.7926 Q517.9688,88.9019 517.4219,89.6519 Q516.8906,90.3863 515.9219,90.7613 Q514.9531,91.1363 513.6563,91.1363 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="81" x="534.75" y="80.292">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="80" x="535.25" y="102.0841">RaftServer</text><line style="stroke:#181818;stroke-width:0.5;" x1="355.5" x2="762.5" y1="111.7721" y2="111.7721"/><line style="stroke:#181818;stroke-width:0.5;" x1="355.5" x2="762.5" y1="119.7721" y2="119.7721"/><ellipse cx="365.5" cy="136.1681" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" text-decoration="underline" textLength="231" x="374.5" y="140.8761">apply(...) : Behavior[Command]</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="362.5" y="154.9602"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" text-decoration="underline" textLength="383" x="374.5" y="162.6682">commandHandler(...): ReplyEffect[Event, RaftState]</text></g><!--MD5=[1a73e52edbc4b96611fb9c4d7397775a]
class Log.LogEntry--><g id="elem_Log.LogEntry"><rect codeLine="9" fill="#F1F1F1" height="48" id="Log.LogEntry" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="208" y="641.188"/><ellipse cx="223" cy="657.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M222.6094,663.3443 Q220.9688,663.3443 219.9063,662.6568 Q218.8438,661.9536 218.3125,660.688 Q217.7969,659.4068 217.7969,657.7193 Q217.7969,655.813 218.4063,654.4536 Q219.0313,653.0786 220.2344,652.3443 Q221.4531,651.6099 223.2031,651.6099 Q224.0469,651.6099 224.6719,651.7818 Q225.2969,651.938 225.9531,652.2661 L225.1875,654.1568 Q224.5938,653.8599 224.0938,653.7505 Q223.5938,653.6411 223.125,653.6411 Q222.0313,653.6411 221.375,654.1411 Q220.7188,654.6255 220.4375,655.5318 Q220.1563,656.4224 220.1563,657.6255 Q220.1563,659.5005 220.8281,660.4068 Q221.5,661.313 223,661.313 Q223.5625,661.313 224.1406,661.1724 Q224.7344,661.0318 225.5156,660.6724 L225.5156,662.7505 Q224.8281,663.063 224.0781,663.2036 Q223.3438,663.3443 222.6094,663.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="68" x="237" y="663.396">LogEntry</text><line style="stroke:#181818;stroke-width:0.5;" x1="209" x2="307" y1="673.188" y2="673.188"/><line style="stroke:#181818;stroke-width:0.5;" x1="209" x2="307" y1="681.188" y2="681.188"/></g><!--MD5=[d9284a68a35085e9d4d1c89004e75285]
class RaftState.RaftState--><g id="elem_RaftState.RaftState"><rect codeLine="23" fill="#F1F1F1" height="200.5443" id="RaftState.RaftState" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="413" x="384.5" y="311.188"/><ellipse cx="555.25" cy="327.188" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M552.1875,333.188 L552.1875,331.5943 L554.4063,331.3286 L554.4063,323.6255 L552.1875,323.3599 L552.1875,321.7661 L558.9063,321.7661 L558.9063,323.3599 L556.6406,323.6255 L556.6406,331.3286 L558.9063,331.5943 L558.9063,333.188 L552.1875,333.188 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="63" x="575.75" y="333.396">RaftState</text><line style="stroke:#181818;stroke-width:0.5;" x1="385.5" x2="796.5" y1="343.188" y2="343.188"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="114" x="390.5" y="364.292">Log: LogEntry[]</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="143" x="390.5" y="386.0841">currentTerm: Long</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="193" x="390.5" y="407.8761">votedFor: Option&lt;String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="60" x="390.5" y="429.6682">log: Log</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="146" x="390.5" y="451.4602">commitIndex: Long</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="130" x="390.5" y="473.2523">lastApplied: Long</text><line style="stroke:#181818;stroke-width:0.5;" x1="385.5" x2="796.5" y1="481.9403" y2="481.9403"/><ellipse cx="395.5" cy="498.3363" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="387" x="404.5" y="503.0443">applyEvent(state: RaftState, event: Event): RaftState</text></g><polygon fill="none" points="585.2574,511.7323,591.1024,532.0998,577.1253,531.2994" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="584.1139" x2="584" y1="531.6996" y2="533.688"/><line style="stroke:#181818;stroke-width:1.0;" x1="580.1856" x2="577.32" y1="311.188" y2="284.618"/><!--MD5=[901a5f0af48da9138607dde15df414b7]
class RaftState.Leader--><g id="elem_RaftState.Leader"><rect codeLine="34" fill="#F1F1F1" height="91.5841" id="RaftState.Leader" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="260" x="641" y="619.188"/><ellipse cx="740.75" cy="635.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M740.3594,641.3443 Q738.7188,641.3443 737.6563,640.6568 Q736.5938,639.9536 736.0625,638.688 Q735.5469,637.4068 735.5469,635.7193 Q735.5469,633.813 736.1563,632.4536 Q736.7813,631.0786 737.9844,630.3443 Q739.2031,629.6099 740.9531,629.6099 Q741.7969,629.6099 742.4219,629.7818 Q743.0469,629.938 743.7031,630.2661 L742.9375,632.1568 Q742.3438,631.8599 741.8438,631.7505 Q741.3438,631.6411 740.875,631.6411 Q739.7813,631.6411 739.125,632.1411 Q738.4688,632.6255 738.1875,633.5318 Q737.9063,634.4224 737.9063,635.6255 Q737.9063,637.5005 738.5781,638.4068 Q739.25,639.313 740.75,639.313 Q741.3125,639.313 741.8906,639.1724 Q742.4844,639.0318 743.2656,638.6724 L743.2656,640.7505 Q742.5781,641.063 741.8281,641.2036 Q741.0938,641.3443 740.3594,641.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="52" x="761.25" y="641.396">Leader</text><line style="stroke:#181818;stroke-width:0.5;" x1="642" x2="900" y1="651.188" y2="651.188"/><ellipse cx="652" cy="667.584" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="234" x="661" y="672.292">matchIndex: Map[String, Long]</text><ellipse cx="652" cy="689.3761" fill="none" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="219" x="661" y="694.0841">nextIndex: Map[String, Long]</text><line style="stroke:#181818;stroke-width:0.5;" x1="642" x2="900" y1="702.7721" y2="702.7721"/></g><!--MD5=[3722959e50e3fc6be21b4e738740c1cd]
class RaftState.Follower--><g id="elem_RaftState.Follower"><rect codeLine="38" fill="#F1F1F1" height="48" id="RaftState.Follower" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="97" x="364.5" y="641.188"/><ellipse cx="379.5" cy="657.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M379.1094,663.3443 Q377.4688,663.3443 376.4063,662.6568 Q375.3438,661.9536 374.8125,660.688 Q374.2969,659.4068 374.2969,657.7193 Q374.2969,655.813 374.9063,654.4536 Q375.5313,653.0786 376.7344,652.3443 Q377.9531,651.6099 379.7031,651.6099 Q380.5469,651.6099 381.1719,651.7818 Q381.7969,651.938 382.4531,652.2661 L381.6875,654.1568 Q381.0938,653.8599 380.5938,653.7505 Q380.0938,653.6411 379.625,653.6411 Q378.5313,653.6411 377.875,654.1411 Q377.2188,654.6255 376.9375,655.5318 Q376.6563,656.4224 376.6563,657.6255 Q376.6563,659.5005 377.3281,660.4068 Q378,661.313 379.5,661.313 Q380.0625,661.313 380.6406,661.1724 Q381.2344,661.0318 382.0156,660.6724 L382.0156,662.7505 Q381.3281,663.063 380.5781,663.2036 Q379.8438,663.3443 379.1094,663.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="65" x="393.5" y="663.396">Follower</text><line style="stroke:#181818;stroke-width:0.5;" x1="365.5" x2="460.5" y1="673.188" y2="673.188"/><line style="stroke:#181818;stroke-width:0.5;" x1="365.5" x2="460.5" y1="681.188" y2="681.188"/></g><!--MD5=[2ca9f24f400a2a264137252b58d3eeeb]
class RaftState.Candidate--><g id="elem_RaftState.Candidate"><rect codeLine="39" fill="#F1F1F1" height="48" id="RaftState.Candidate" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="496.5" y="641.188"/><ellipse cx="511.5" cy="657.188" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M511.1094,663.3443 Q509.4688,663.3443 508.4063,662.6568 Q507.3438,661.9536 506.8125,660.688 Q506.2969,659.4068 506.2969,657.7193 Q506.2969,655.813 506.9063,654.4536 Q507.5313,653.0786 508.7344,652.3443 Q509.9531,651.6099 511.7031,651.6099 Q512.5469,651.6099 513.1719,651.7818 Q513.7969,651.938 514.4531,652.2661 L513.6875,654.1568 Q513.0938,653.8599 512.5938,653.7505 Q512.0938,653.6411 511.625,653.6411 Q510.5313,653.6411 509.875,654.1411 Q509.2188,654.6255 508.9375,655.5318 Q508.6563,656.4224 508.6563,657.6255 Q508.6563,659.5005 509.3281,660.4068 Q510,661.313 511.5,661.313 Q512.0625,661.313 512.6406,661.1724 Q513.2344,661.0318 514.0156,660.6724 L514.0156,662.7505 Q513.3281,663.063 512.5781,663.2036 Q511.8438,663.3443 511.1094,663.3443 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="77" x="525.5" y="663.396">Candidate</text><line style="stroke:#181818;stroke-width:0.5;" x1="497.5" x2="604.5" y1="673.188" y2="673.188"/><line style="stroke:#181818;stroke-width:0.5;" x1="497.5" x2="604.5" y1="681.188" y2="681.188"/></g><!--MD5=[18efe760b990726fe968d2abbf214c58]
class StateMachine.Command--><g id="elem_StateMachine.Command"><rect codeLine="52" fill="#F1F1F1" height="48" id="StateMachine.Command" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="46.5" y="641.188"/><ellipse cx="61.5" cy="657.188" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M58.4375,663.188 L58.4375,661.5943 L60.6563,661.3286 L60.6563,653.6255 L58.4375,653.3599 L58.4375,651.7661 L65.1563,651.7661 L65.1563,653.3599 L62.8906,653.6255 L62.8906,661.3286 L65.1563,661.5943 L65.1563,663.188 L58.4375,663.188 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="73" x="75.5" y="663.396">Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="150.5" y1="673.188" y2="673.188"/><line style="stroke:#181818;stroke-width:0.5;" x1="47.5" x2="150.5" y1="681.188" y2="681.188"/></g><!--MD5=[2c8378720a964b636c28af4203d4aefb]
class RaftServer.Command--><g id="elem_RaftServer.Command"><rect codeLine="60" fill="#F1F1F1" height="48" id="RaftServer.Command" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="105" x="935.5" y="872.688"/><ellipse cx="950.5" cy="888.688" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M947.4375,894.688 L947.4375,893.0943 L949.6563,892.8286 L949.6563,885.1255 L947.4375,884.8599 L947.4375,883.2661 L954.1563,883.2661 L954.1563,884.8599 L951.8906,885.1255 L951.8906,892.8286 L954.1563,893.0943 L954.1563,894.688 L947.4375,894.688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="73" x="964.5" y="894.896">Command</text><line style="stroke:#181818;stroke-width:0.5;" x1="936.5" x2="1039.5" y1="904.688" y2="904.688"/><line style="stroke:#181818;stroke-width:0.5;" x1="936.5" x2="1039.5" y1="912.688" y2="912.688"/></g><!--MD5=[46938c0eab8650c270f234f9bf3e80c5]
class RaftServer.Event--><g id="elem_RaftServer.Event"><rect codeLine="61" fill="#F1F1F1" height="48" id="RaftServer.Event" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="69" x="831.5" y="872.688"/><ellipse cx="846.5" cy="888.688" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M843.4375,894.688 L843.4375,893.0943 L845.6563,892.8286 L845.6563,885.1255 L843.4375,884.8599 L843.4375,883.2661 L850.1563,883.2661 L850.1563,884.8599 L847.8906,885.1255 L847.8906,892.8286 L850.1563,893.0943 L850.1563,894.688 L843.4375,894.688 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="16" font-style="italic" lengthAdjust="spacing" textLength="37" x="860.5" y="894.896">Event</text><line style="stroke:#181818;stroke-width:0.5;" x1="832.5" x2="899.5" y1="904.688" y2="904.688"/><line style="stroke:#181818;stroke-width:0.5;" x1="832.5" x2="899.5" y1="912.688" y2="912.688"/></g><!--MD5=[4a0098b5141273bb1a26cb7d79e44470]
link RaftServer to RaftState.RaftState--><g id="link_RaftServer_RaftState.RaftState"><path codeLine="72" d="M565.06,171.518 C568.53,203.548 573.04,245.128 577.32,284.618 " fill="none" id="RaftServer-to-RaftState.RaftState" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="577.85,289.438,580.876,280.0655,577.3214,284.466,572.9209,280.9114,577.85,289.438" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="577.6466,230.0491,579.9831,218.8781,572.9707,219.6383,577.6466,230.0491" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="65" x="588" y="230.292">contains</text></g><!--MD5=[67f85315b686251844a230589e3c3e3c]
link RaftServer to RaftServer.Command--><g id="link_RaftServer_RaftServer.Command"><path codeLine="73" d="M740.62,171.678 C809.66,192.968 872,212.188 872,212.188 C872,212.188 931,243.188 931,243.188 C931,243.188 1067,562.188 1067,562.188 C1067,562.188 1067,585.188 1067,585.188 C1067,585.188 1015.26,788.548 995.52,866.118 " fill="none" id="RaftServer-to-RaftServer.Command" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="994.31,870.888,1000.4003,863.1479,995.5395,866.0415,992.6459,861.1808,994.31,870.888" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="1070.9325,568.4515,1071.3619,579.8561,1077.9833,577.4256,1070.9325,568.4515" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="102" x="1084" y="580.292">is received by</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="734.1167" y="196.6216">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="985.291" y="860.0563">1</text></g><!--MD5=[8ba9ec20f5cb361782b90193f5ee5741]
link RaftServer to RaftServer.Event--><g id="link_RaftServer_RaftServer.Event"><path codeLine="74" d="M716.02,171.608 C812.21,205.868 917,243.188 917,243.188 C917,243.188 936,743.188 936,743.188 C936,743.188 936,766.188 936,766.188 C936,766.188 918,796.188 918,796.188 C918,796.188 896.52,837.288 881.17,866.658 " fill="none" id="RaftServer-to-RaftServer.Event" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="878.89,871.018,886.6035,864.8941,881.2058,866.5866,879.5133,861.1889,878.89,871.018" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="933.613,568.2466,932.691,579.6219,939.5533,577.9914,933.613,568.2466" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="112" x="946" y="580.292">is produced by</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="706.6723" y="196.5435">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="871.0644" y="860.0688">1</text></g><!--MD5=[954c5c3513522ca5fbcd5a708e781efb]
link RaftServer to Server--><g id="link_RaftServer_Server"><path codeLine="75" d="M763.94,164.018 C807.68,174.328 841,182.188 841,182.188 C841,182.188 1049,212.188 1049,212.188 C1049,212.188 1081,235.188 1081,235.188 C1081,235.188 1102,243.188 1102,243.188 C1102,243.188 1151.8,333.848 1178.12,381.778 " fill="none" id="RaftServer-to-Server" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="1180.48,386.068,1179.6685,376.2526,1178.0797,381.6818,1172.6506,380.0931,1180.48,386.068" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="1092.3107,226.8762,1084.3447,218.7036,1081.0623,224.9467,1092.3107,226.8762" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="145" x="1098" y="230.292">sends messages to</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="771.7722" y="161.5287">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="1167.9956" y="375.1185">1</text></g><!--MD5=[a7050f77cc7f58b72686df9db393e25e]
link RaftServer to Configuration--><g id="link_RaftServer_Configuration"><path codeLine="76" d="M763.76,114.688 C792.77,114.688 822.6,114.688 851.64,114.688 " fill="none" id="RaftServer-to-Configuration" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="856.31,114.688,847.31,110.688,851.31,114.688,847.31,118.688,856.31,114.688" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="792.75,100.584,781.8959,97.0573,781.8959,104.1107,792.75,100.584" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="42" x="797.75" y="106.792">holds</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="771.2803" y="110.4259">1</text></g><!--MD5=[a2c6cd2f1234db70566c62a2ee76e4ff]
link RaftServer to StateMachine--><g id="link_RaftServer_StateMachine"><path codeLine="77" d="M466.39,171.538 C431.01,192.888 399,212.188 399,212.188 C399,212.188 348,243.188 348,243.188 C348,243.188 277.37,311.968 226.63,361.378 " fill="none" id="RaftServer-to-StateMachine" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="223.18,364.748,232.4215,361.3428,226.7652,361.2628,226.8452,355.6065,223.18,364.748" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="400.296,227.8086,410.9949,223.8357,406.6164,218.3058,400.296,227.8086" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="145" x="416" y="230.292">sends messages to</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="446.1617" y="196.4655">1</text></g><!--MD5=[efe0cffba34ce96529e565cca927fa61]
link Log.LogEntry to Log--><g id="link_Log.LogEntry_Log"><path codeLine="79" d="M237.3,689.288 C216.97,711.968 189,743.188 189,743.188 C189,743.188 189,766.188 189,766.188 C189,766.188 195.23,773.658 204.7,785.008 " fill="none" id="Log.LogEntry-to-Log" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="212.81,794.738,212.0388,787.5683,205.1239,785.5226,205.8951,792.6923,212.81,794.738" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="222.4725" y="714.4849">1</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="180.4132" y="783.5292">0..*</text></g><!--MD5=[4520b282932562787465b9c3ad68444d]
link StateMachine to StateMachine.Command--><g id="link_StateMachine_StateMachine.Command"><path codeLine="81" d="M162.23,457.648 C146.57,508.828 121.42,590.948 108.05,634.628 " fill="none" id="StateMachine-to-StateMachine.Command" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="106.61,639.338,113.0642,631.8987,108.0704,634.556,105.4131,629.5622,106.61,639.338" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="136.7564,568.3469,130.2068,577.6931,136.9513,579.7579,136.7564,568.3469" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="89" x="146" y="580.292">Received by</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="132.4655" y="482.721">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="97.8084" y="628.4817">1</text></g><!--MD5=[0b6ec583d72c4880a16ad8f59a9ab69c]
reverse link RaftState.RaftState to RaftState.Leader--><g id="link_RaftState.RaftState_RaftState.Leader"><path codeLine="83" d="M584,533.688 C584,533.688 651.89,581.068 705.86,618.728 " fill="none" id="RaftState.RaftState-backto-RaftState.Leader" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c117e887ea42ac98421d01f6f489c988]
reverse link RaftState.RaftState to RaftState.Follower--><g id="link_RaftState.RaftState_RaftState.Follower"><path codeLine="84" d="M584,533.688 C584,533.688 479,593.188 479,593.188 C479,593.188 453.86,620.238 434.61,640.938 " fill="none" id="RaftState.RaftState-backto-RaftState.Follower" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a21a4385fb52bdad5cb5e2a744728277]
reverse link RaftState.RaftState to RaftState.Candidate--><g id="link_RaftState.RaftState_RaftState.Candidate"><path codeLine="85" d="M584,533.688 C584,533.688 566.39,603.318 556.9,640.858 " fill="none" id="RaftState.RaftState-backto-RaftState.Candidate" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[afe01245b5c8b0e1c6668ff901ba079f]
link RaftState.Leader to RaftServer.Event--><g id="link_RaftState.Leader_RaftServer.Event"><path codeLine="87" d="M803.9,711.428 C816.09,728.188 827,743.188 827,743.188 C827,743.188 847.03,821.518 858.38,865.908 " fill="none" id="RaftState.Leader-to-RaftServer.Event" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="859.62,870.728,861.2572,861.0162,858.3771,865.885,853.5083,863.0048,859.62,870.728" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="839.9955,760.7425,839.7115,749.3333,833.0596,751.6792,839.9955,760.7425" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="78" x="849" y="761.292">consumes</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="780.4497" y="735.8792">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="848.4282" y="859.8698">1</text></g><!--MD5=[d0447a6976357518e65cc2ea84e2bdfe]
link RaftState.Follower to RaftServer.Event--><g id="link_RaftState.Follower_RaftServer.Event"><path codeLine="88" d="M431.05,689.638 C453.81,719.188 490,766.188 490,766.188 C490,766.188 828,796.188 828,796.188 C828,796.188 843.57,836.948 854.77,866.288 " fill="none" id="RaftState.Follower-to-RaftServer.Event" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="856.55,870.948,857.0727,861.113,854.7647,866.2776,849.6001,863.9695,856.55,870.948" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="501.538,757.3928,492.8767,749.961,490.1626,756.4713,501.538,757.3928" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="78" x="507" y="761.292">consumes</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="406.1547" y="714.474">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="856.0151" y="860.0688">1</text></g><!--MD5=[6a04098be6b98e11b94df6c5a7f45764]
link RaftState.Candidate to RaftServer.Event--><g id="link_RaftState.Candidate_RaftServer.Event"><path codeLine="89" d="M564.13,689.638 C580.68,719.188 607,766.188 607,766.188 C607,766.188 828,796.188 828,796.188 C828,796.188 843.57,836.948 854.77,866.288 " fill="none" id="RaftState.Candidate-to-RaftServer.Event" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="856.55,870.948,857.0727,861.113,854.7647,866.2776,849.6001,863.9695,856.55,870.948" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="618.1272,758.2003,610.6837,749.5492,607.0203,755.5766,618.1272,758.2003" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="78" x="624" y="761.292">consumes</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="26" x="538.1584" y="714.474">0..*</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="9" x="844.8213" y="860.0688">1</text></g><!--MD5=[a832f7384837fdd7a1a4d540d828a38b]
reverse link RaftState.Leader to Log--><g id="link_RaftState.Leader_Log"><path codeLine="91" d="M732.73,723.308 C717.71,745.718 704,766.188 704,766.188 C704,766.188 614.76,794.588 519.85,824.778 " fill="none" id="RaftState.Leader-backto-Log" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="739.79,712.768,733.126,715.5232,733.1062,722.7343,739.7702,719.9791,739.79,712.768" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="718.5838,757.6657,729.8992,756.179,726.8643,749.8119,718.5838,757.6657" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="65" x="735" y="761.292">contains</text></g><!--MD5=[c2db7dd83294d9d320bc29c29a15435c]
reverse link RaftState.Follower to Log--><g id="link_RaftState.Follower_Log"><path codeLine="92" d="M371.66,698.238 C348.41,716.268 324,735.188 324,735.188 C324,735.188 222,743.188 222,743.188 C222,743.188 222,766.188 222,766.188 C222,766.188 229.23,778.678 239.21,795.898 " fill="none" id="RaftState.Follower-backto-Log" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="381.67,690.478,374.4776,690.9966,372.19,697.8353,379.3824,697.3166,381.67,690.478" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="223.1708,758.6448,233.9999,755.0419,229.814,749.3648,223.1708,758.6448" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="65" x="239" y="761.292">contains</text></g><!--MD5=[e16980a67fd650ff8427da7fd0f6dc73]
reverse link RaftState.Candidate to Log--><g id="link_RaftState.Candidate_Log"><path codeLine="93" d="M516.27,699.468 C497.86,717.118 479,735.188 479,735.188 C479,735.188 345,743.188 345,743.188 C345,743.188 337.45,767.158 328.35,796.098 " fill="none" id="RaftState.Candidate-backto-Log" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="525.53,690.598,518.4298,691.858,516.862,698.8966,523.9622,697.6366,525.53,690.598" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#000000" points="345.6641,757.8278,356.9296,756.0006,353.7041,749.7279,345.6641,757.8278" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="65" x="362" y="761.292">contains</text></g><!--MD5=[9484f28675db217b1136ca911242d4e1]
reverse link Configuration to Server--><g id="link_Configuration_Server"><path codeLine="95" d="M1205.3,188.958 C1232.23,202.348 1252,212.188 1252,212.188 C1252,212.188 1252,235.188 1252,235.188 C1252,235.188 1217.48,339.648 1201.7,387.378 " fill="none" id="Configuration-backto-Server" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="1193.83,183.258,1197.4169,189.5137,1204.571,188.6088,1200.9841,182.353,1193.83,183.258" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[7195e96e292ad4a4f1225c60c586486a]
@startuml telegraftRaftService

skinparam groupInheritance 2
skinparam linetype polyline
skinparam defaultFontSize 16

package com.telegraft.rafktor {

  namespace Log {
    class LogEntry
  }

  class Log {
    + logEntries: Vector[LogEntry]
    + Log(logEntries: Vector[LogEntry]): Log
    + apply(index: Int): LogEntry
    + length(): Int
    + lastLogTerm(): Long
    + appendEntries(newEntries: Log, prevLogIndex: Int): Log
    {static} + empty(): Log
  }

  namespace RaftState {
    interface RaftState {
      Log: LogEntry[]
      currentTerm: Long
      votedFor: Option<String>
      log: Log
      commitIndex: Long
      lastApplied: Long

      + applyEvent(state: RaftState, event: Event): RaftState

    }
    class Leader {
      + matchIndex: Map[String, Long]
      + nextIndex: Map[String, Long]
    }
    class Follower
    class Candidate
  }

  class Configuration {
    - servers: Set[String]
    + Configuration(servers: Set[String]): Configuration
    + getConfiguration(): Set[String]
    + getServer(server: String): String
  }

  interface Server

  namespace StateMachine {
    interface Command
  }

  class StateMachine << (S,#FF7700) Singleton >> {
    {static} +apply(): Behavior[Command]
  }

  namespace RaftServer {
    interface Command
    interface Event
  }

  class RaftServer << (S,#FF7700) Singleton >> {
    {static} +apply(...) : Behavior[Command]
    {static} - commandHandler(...): ReplyEffect[Event, RaftState]
  }

}


RaftServer ..> RaftState.RaftState: contains >
RaftServer "0..*" ..> "1" RaftServer.Command: < is received by
RaftServer "0..*" ..> "1" RaftServer.Event: < is produced by
RaftServer "0..*" ..> "1" Server: sends messages to >
RaftServer "1" .> Configuration: holds >
RaftServer "1" ..> StateMachine: sends messages to >

Log.LogEntry "1" - -o "0..*" Log

StateMachine "0..*"..>"1" StateMachine.Command: Received by <

RaftState.RaftState <|- - RaftState.Leader
RaftState.RaftState <|- - RaftState.Follower
RaftState.RaftState <|- - RaftState.Candidate

RaftState.Leader "0..*"..> "1" RaftServer.Event: consumes >
RaftState.Follower "0..*"..>"1" RaftServer.Event: consumes >
RaftState.Candidate "0..*"..>"1" RaftServer.Event: consumes >

RaftState.Leader o- - Log: contains >
RaftState.Follower o- - Log: contains >
RaftState.Candidate o- - Log: contains >

Configuration o- - Server



@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: it
Country: IT
--></g></svg>