<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="808.2px" preserveAspectRatio="none" style="width:963px;height:808px;background:#FFFFFF;" version="1.1" viewBox="0 0 963 808" width="963px" zoomAndPan="magnify"><defs/><g><!--MD5=[f4140d8ccf106ac44d26417018d129ed]
cluster com.telegraft.rafktor--><g id="cluster_com.telegraft.rafktor"><path d="M5.1,3.9612 L93.9,3.9612 A2.25,2.25 0 0 1 95.4,5.4612 L99.6,19.0019 L957.3,19.0019 A1.5,1.5 0 0 1 958.8,20.5019 L958.8,802.8612 A1.5,1.5 0 0 1 957.3,804.3612 L5.1,804.3612 A1.5,1.5 0 0 1 3.6,802.8612 L3.6,5.4612 A1.5,1.5 0 0 1 5.1,3.9612 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><line style="stroke:#000000;stroke-width:0.8999999999999999;" x1="3.6" x2="99.6" y1="19.0019" y2="19.0019"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacing" textLength="88.2" x="6" y="14.1408">com.telegraft.rafktor</text></g><!--MD5=[9637f819ccb2d1556332eb4842cfeb44]
cluster StateMachine--><g id="cluster_StateMachine"><path d="M612.9,623.4612 L669.9,623.4612 A2.25,2.25 0 0 1 671.4,624.9612 L675.6,638.5019 L686.7,638.5019 A1.5,1.5 0 0 1 688.2,640.0019 L688.2,683.1612 A1.5,1.5 0 0 1 686.7,684.6612 L612.9,684.6612 A1.5,1.5 0 0 1 611.4,683.1612 L611.4,624.9612 A1.5,1.5 0 0 1 612.9,623.4612 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><line style="stroke:#000000;stroke-width:0.8999999999999999;" x1="611.4" x2="675.6" y1="638.5019" y2="638.5019"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacing" textLength="56.4" x="613.8" y="633.6408">StateMachine</text></g><!--MD5=[e13d1005b82dbd09626ef637a72c2adb]
cluster RaftServer--><g id="cluster_RaftServer"><path d="M99.3,611.4612 L143.1,611.4612 A2.25,2.25 0 0 1 144.6,612.9612 L148.8,626.5019 L595.5,626.5019 A1.5,1.5 0 0 1 597,628.0019 L597,788.4612 A1.5,1.5 0 0 1 595.5,789.9612 L99.3,789.9612 A1.5,1.5 0 0 1 97.8,788.4612 L97.8,612.9612 A1.5,1.5 0 0 1 99.3,611.4612 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><line style="stroke:#000000;stroke-width:0.8999999999999999;" x1="97.8" x2="148.8" y1="626.5019" y2="626.5019"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacing" textLength="43.2" x="100.2" y="621.6408">RaftServer</text></g><!--MD5=[a38c2518b9a9e3646e37048027339f17]
cluster Log--><g id="cluster_Log"><path d="M871.5,494.7612 L887.7,494.7612 A2.25,2.25 0 0 1 889.2,496.2612 L893.4,509.8019 L942.9,509.8019 A1.5,1.5 0 0 1 944.4,511.3019 L944.4,554.4612 A1.5,1.5 0 0 1 942.9,555.9612 L871.5,555.9612 A1.5,1.5 0 0 1 870,554.4612 L870,496.2612 A1.5,1.5 0 0 1 871.5,494.7612 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><line style="stroke:#000000;stroke-width:0.8999999999999999;" x1="870" x2="893.4" y1="509.8019" y2="509.8019"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacing" textLength="15.6" x="872.4" y="504.9408">Log</text></g><!--MD5=[bd66c3e5a15dc40bf7026992665c599f]
cluster RaftState--><g id="cluster_RaftState"><path d="M402.3,300.3612 L441.3,300.3612 A2.25,2.25 0 0 1 442.8,301.8612 L447,315.4019 L716.1,315.4019 A1.5,1.5 0 0 1 717.6,316.9019 L717.6,565.8612 A1.5,1.5 0 0 1 716.1,567.3612 L402.3,567.3612 A1.5,1.5 0 0 1 400.8,565.8612 L400.8,301.8612 A1.5,1.5 0 0 1 402.3,300.3612 " fill="none" style="stroke:#000000;stroke-width:0.8999999999999999;"/><line style="stroke:#000000;stroke-width:0.8999999999999999;" x1="400.8" x2="447" y1="315.4019" y2="315.4019"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacing" textLength="38.4" x="403.2" y="310.5408">RaftState</text></g><g id="elem_N0"><path d="M653.7,26.7612 L653.7,96.5028 L812.7,96.5028 L812.7,32.7612 L806.7,26.7612 L653.7,26.7612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><path d="M806.7,26.7612 L806.7,32.7612 L812.7,32.7612 L806.7,26.7612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="118.2" x="657.3" y="38.0994">This diagram uses elements from</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="126.6" x="657.3" y="48.723">the scala syntax: types are specified</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="116.4" x="657.3" y="59.3466">after ":" and type parameters are</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="137.4" x="657.3" y="69.9702">between squared brackets. Collections</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="146.4" x="657.3" y="80.5938">and types are the ones used in the actual</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="19.2" x="657.3" y="91.2174">code.</text></g><!--MD5=[9b7eb76f801c309757ef5968cb2349d9]
class Configuration--><g id="elem_Configuration"><rect codeLine="16" fill="#F1F1F1" height="74.563" id="Configuration" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="214.2" x="13.5" y="352.2612"/><ellipse cx="90.15" cy="361.8612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M89.8313,366.0143 Q88.7813,366.0143 88.0969,365.5737 Q87.4219,365.1237 87.0844,364.3174 Q86.7563,363.5018 86.7563,362.4237 Q86.7563,361.2049 87.15,360.3331 Q87.5438,359.4612 88.3125,358.9924 Q89.0813,358.5237 90.2063,358.5237 Q90.7406,358.5237 91.1438,358.6362 Q91.5469,358.7393 91.9594,358.9456 L91.4719,360.1549 Q91.0969,359.9674 90.7688,359.8924 Q90.45,359.8174 90.1594,359.8174 Q89.4563,359.8174 89.0344,360.1362 Q88.6125,360.4549 88.4344,361.0268 Q88.2563,361.5987 88.2563,362.3581 Q88.2563,363.5674 88.6875,364.1487 Q89.1187,364.7206 90.075,364.7206 Q90.4312,364.7206 90.8062,364.6268 Q91.1812,364.5331 91.6781,364.3081 L91.6781,365.6393 Q91.2375,365.8268 90.7594,365.9206 Q90.2906,366.0143 89.8313,366.0143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.8" x="102.45" y="365.1204">Configuration</text><line style="stroke:#181818;stroke-width:0.3;" x1="14.1" x2="227.1" y1="371.4612" y2="371.4612"/><rect fill="none" height="3.6" style="stroke:#C82930;stroke-width:0.6;" width="3.6" x="18.3" y="378.6816"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="77.4" x="25.5" y="382.8408">servers: Set[String]</text><line style="stroke:#181818;stroke-width:0.3;" x1="14.1" x2="227.1" y1="387.7019" y2="387.7019"/><ellipse cx="20.1" cy="396.7223" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="198.6" x="25.5" y="399.0815">Configuration(servers: Set[String]): Configuration</text><ellipse cx="20.1" cy="408.1631" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="121.8" x="25.5" y="410.5223">getConfiguration(): Set[String]</text><ellipse cx="20.1" cy="419.6038" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="127.8" x="25.5" y="421.963">getServer(server: String): String</text></g><g id="elem_GMN5"><path d="M13.5,178.2612 L13.5,216.132 A0,0 0 0 0 13.5,216.132 L88.938,216.132 L114.372,352.1232 L93.738,216.132 L162.9,216.132 A0,0 0 0 0 162.9,216.132 L162.9,184.2612 L156.9,178.2612 L13.5,178.2612 A0,0 0 0 0 13.5,178.2612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><path d="M156.9,178.2612 L156.9,184.2612 L162.9,184.2612 L156.9,178.2612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="133.2" x="17.1" y="189.5994">Servers are parsed from the provided</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="132.6" x="17.1" y="200.223">configuration, and they are identified</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="136.8" x="17.1" y="210.8466">by the following string "interface:port"</text></g><!--MD5=[c60af77fe5573b84a4aa4bce89659574]
class Server--><g id="elem_Server"><rect codeLine="29" fill="#F1F1F1" height="28.8" id="Server" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="43.2" x="99" y="517.5612"/><ellipse cx="108" cy="527.1612" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M105.6187,531.0612 L105.6187,530.0393 L107.0344,529.8799 L107.0344,524.9581 L105.6187,524.7987 L105.6187,523.7768 L109.9031,523.7768 L109.9031,524.7987 L108.45,524.9581 L108.45,529.8799 L109.9031,530.0393 L109.9031,531.0612 L105.6187,531.0612 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="24" x="116.4" y="530.4204">Server</text><line style="stroke:#181818;stroke-width:0.3;" x1="99.6" x2="141.6" y1="536.7612" y2="536.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="99.6" x2="141.6" y1="541.5612" y2="541.5612"/></g><!--MD5=[0806f16439603e89e128acbb9fcaf993]
class ServerImpl--><g id="elem_ServerImpl"><rect codeLine="33" fill="#F1F1F1" height="28.8" id="ServerImpl" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="63.6" x="24.6" y="646.2612"/><ellipse cx="33.6" cy="655.8612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M33.2813,660.0143 Q32.2312,660.0143 31.5469,659.5737 Q30.8719,659.1237 30.5344,658.3174 Q30.2062,657.5018 30.2062,656.4237 Q30.2062,655.2049 30.6,654.3331 Q30.9938,653.4612 31.7625,652.9924 Q32.5313,652.5237 33.6563,652.5237 Q34.1906,652.5237 34.5938,652.6362 Q34.9969,652.7393 35.4094,652.9456 L34.9219,654.1549 Q34.5469,653.9674 34.2188,653.8924 Q33.9,653.8174 33.6094,653.8174 Q32.9063,653.8174 32.4844,654.1362 Q32.0625,654.4549 31.8844,655.0268 Q31.7062,655.5987 31.7062,656.3581 Q31.7062,657.5674 32.1375,658.1487 Q32.5688,658.7206 33.525,658.7206 Q33.8813,658.7206 34.2563,658.6268 Q34.6313,658.5331 35.1281,658.3081 L35.1281,659.6393 Q34.6875,659.8268 34.2094,659.9206 Q33.7406,660.0143 33.2813,660.0143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="44.4" x="42" y="659.1204">ServerImpl</text><line style="stroke:#181818;stroke-width:0.3;" x1="25.2" x2="87.6" y1="665.4612" y2="665.4612"/><line style="stroke:#181818;stroke-width:0.3;" x1="25.2" x2="87.6" y1="670.2612" y2="670.2612"/></g><!--MD5=[3626c233e602113c8cf5977cfac9c02f]
class StateMachine--><g id="elem_StateMachine"><rect codeLine="39" fill="#F1F1F1" height="48.288" id="StateMachine" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="130.2" x="728.7" y="507.9612"/><ellipse cx="763.65" cy="521.5848" fill="#FF7700" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M763.4531,525.5879 Q762.9,525.5879 762.3656,525.4848 Q761.8313,525.3723 761.3625,525.1473 L761.3625,523.7973 Q761.9344,524.0879 762.4594,524.2285 Q762.9938,524.3598 763.5,524.3598 Q764.025,524.3598 764.3625,524.1817 Q764.7,524.0035 764.7,523.5348 Q764.7,523.2067 764.5219,523.0285 Q764.3438,522.841 764.0063,522.6723 Q763.6687,522.5035 763.2,522.2598 Q762.7312,522.0067 762.3375,521.716 Q761.9531,521.416 761.7281,521.0129 Q761.5031,520.6098 761.5031,520.0379 Q761.5031,519.0629 762.1594,518.5848 Q762.825,518.0973 763.8938,518.0973 Q764.325,518.0973 764.9156,518.2004 Q765.5063,518.2942 766.0781,518.566 L765.6094,519.7192 Q765.1031,519.5035 764.6906,519.4192 Q764.2875,519.3254 763.9781,519.3254 Q763.4719,519.3254 763.2375,519.5317 Q763.0125,519.7285 763.0125,520.1129 Q763.0125,520.4035 763.1531,520.591 Q763.3031,520.7692 763.5844,520.9192 Q763.875,521.0692 764.3156,521.2942 Q764.9156,521.5848 765.3375,521.866 Q765.7594,522.1473 765.9844,522.5223 Q766.2094,522.8879 766.2094,523.4504 Q766.2094,524.1629 765.8625,524.641 Q765.525,525.1098 764.8969,525.3535 Q764.2781,525.5879 763.4531,525.5879 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="7.2" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="784.95" y="518.658">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="55.2" x="775.95" y="529.7472">StateMachine</text><line style="stroke:#181818;stroke-width:0.3;" x1="729.3" x2="858.3" y1="535.2084" y2="535.2084"/><line style="stroke:#181818;stroke-width:0.3;" x1="729.3" x2="858.3" y1="540.0084" y2="540.0084"/><ellipse cx="735.3" cy="549.0288" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" text-decoration="underline" textLength="114.6" x="740.7" y="551.388">apply(): Behavior[Command]</text></g><g id="elem_N1"><path d="M231.6,513.0612 L231.6,550.932 L367.2,550.932 L367.2,519.0612 L361.2,513.0612 L231.6,513.0612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><path d="M361.2,513.0612 L361.2,519.0612 L367.2,519.0612 L361.2,513.0612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="123" x="235.2" y="524.3994">There are more than the displayed</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="123" x="235.2" y="535.023">implementations, but they are not</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="105.6" x="235.2" y="545.6466">shown for the sake of brevity.</text></g><!--MD5=[063d74e43144aaa0d0cf3aecd3794497]
class Log--><g id="elem_Log"><rect codeLine="69" fill="#F1F1F1" height="108.8853" id="Log" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="239.4" x="704.7" y="606.3612"/><ellipse cx="814.65" cy="615.9612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M814.3313,620.1143 Q813.2813,620.1143 812.5969,619.6737 Q811.9219,619.2237 811.5844,618.4174 Q811.2563,617.6018 811.2563,616.5237 Q811.2563,615.3049 811.65,614.4331 Q812.0437,613.5612 812.8125,613.0924 Q813.5813,612.6237 814.7063,612.6237 Q815.2406,612.6237 815.6438,612.7362 Q816.0469,612.8393 816.4594,613.0456 L815.9719,614.2549 Q815.5969,614.0674 815.2688,613.9924 Q814.95,613.9174 814.6594,613.9174 Q813.9563,613.9174 813.5344,614.2362 Q813.1125,614.5549 812.9344,615.1268 Q812.7563,615.6987 812.7563,616.4581 Q812.7563,617.6674 813.1875,618.2487 Q813.6188,618.8206 814.575,618.8206 Q814.9313,618.8206 815.3063,618.7268 Q815.6813,618.6331 816.1781,618.4081 L816.1781,619.7393 Q815.7375,619.9268 815.2594,620.0206 Q814.7906,620.1143 814.3313,620.1143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="14.4" x="826.95" y="619.2204">Log</text><line style="stroke:#181818;stroke-width:0.3;" x1="705.3" x2="943.5" y1="625.5612" y2="625.5612"/><ellipse cx="711.3" cy="634.5816" fill="none" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="112.2" x="716.7" y="636.9408">logEntries: Vector[LogEntry]</text><line style="stroke:#181818;stroke-width:0.3;" x1="705.3" x2="943.5" y1="641.8019" y2="641.8019"/><ellipse cx="711.3" cy="650.8223" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="150.6" x="716.7" y="653.1815">Log(logEntries: Vector[LogEntry]): Log</text><ellipse cx="711.3" cy="662.2631" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="105.6" x="716.7" y="664.6223">apply(index: Int): LogEntry</text><ellipse cx="711.3" cy="673.7038" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="47.4" x="716.7" y="676.063">length(): Int</text><ellipse cx="711.3" cy="685.1446" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="79.2" x="716.7" y="687.5038">lastLogTerm(): Long</text><ellipse cx="711.3" cy="696.5853" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="223.8" x="716.7" y="698.9445">appendEntries(newEntries: Log, prevLogIndex: Int): Log</text><ellipse cx="711.3" cy="708.0261" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" text-decoration="underline" textLength="49.2" x="716.7" y="710.3853">empty(): Log</text></g><!--MD5=[1d8340d1c3ce57a515dba582cdd880ea]
class RaftServer--><g id="elem_RaftServer"><rect codeLine="79" fill="#F1F1F1" height="128.3732" id="RaftServer" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="489.6" x="184.2" y="132.9612"/><ellipse cx="405.45" cy="146.5848" fill="#FF7700" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M405.2531,150.5879 Q404.7,150.5879 404.1656,150.4848 Q403.6312,150.3723 403.1625,150.1473 L403.1625,148.7973 Q403.7344,149.0879 404.2594,149.2285 Q404.7938,149.3598 405.3,149.3598 Q405.825,149.3598 406.1625,149.1817 Q406.5,149.0035 406.5,148.5348 Q406.5,148.2067 406.3219,148.0285 Q406.1438,147.841 405.8063,147.6723 Q405.4688,147.5035 405,147.2598 Q404.5313,147.0067 404.1375,146.716 Q403.7531,146.416 403.5281,146.0129 Q403.3031,145.6098 403.3031,145.0379 Q403.3031,144.0629 403.9594,143.5848 Q404.625,143.0973 405.6937,143.0973 Q406.125,143.0973 406.7156,143.2004 Q407.3063,143.2942 407.8781,143.566 L407.4094,144.7192 Q406.9031,144.5035 406.4906,144.4192 Q406.0875,144.3254 405.7781,144.3254 Q405.2719,144.3254 405.0375,144.5317 Q404.8125,144.7285 404.8125,145.1129 Q404.8125,145.4035 404.9531,145.591 Q405.1031,145.7692 405.3844,145.9192 Q405.675,146.0692 406.1156,146.2942 Q406.7156,146.5848 407.1375,146.866 Q407.5594,147.1473 407.7844,147.5223 Q408.0094,147.8879 408.0094,148.4504 Q408.0094,149.1629 407.6625,149.641 Q407.325,150.1098 406.6969,150.3535 Q406.0781,150.5879 405.2531,150.5879 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="7.2" font-style="italic" lengthAdjust="spacing" textLength="37.2" x="420.15" y="143.658">«Singleton»</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="42" x="417.75" y="154.7472">RaftServer</text><line style="stroke:#181818;stroke-width:0.3;" x1="184.8" x2="673.2" y1="160.2084" y2="160.2084"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="140.4" x="187.8" y="171.588">timer: TimerScheduler[Command],</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="135.6" x="187.8" y="183.0287">context: ActorContext[Command],</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="65.4" x="187.8" y="194.4695">serverId: String,</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="201" x="187.8" y="205.9102">stateMachine: ActorRef[StateMachine.Command],</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="48" x="187.8" y="217.351">s: RaftState,</text><line style="stroke:#181818;stroke-width:0.3;" x1="184.8" x2="673.2" y1="222.2122" y2="222.2122"/><ellipse cx="190.8" cy="231.2325" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" text-decoration="underline" textLength="474" x="196.2" y="233.5917">apply(serverId: String, stateMachine: ActorRef[StateMachine.Command], config: Configuration) : Behavior[Command]</text><rect fill="#F24D5C" height="3.6" style="stroke:#C82930;stroke-width:0.6;" width="3.6" x="189" y="240.8733"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" text-decoration="underline" textLength="163.2" x="196.2" y="245.0325">commandHandler(config: Configuration,</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="172.2" x="196.2" y="256.4732">c: Command): ReplyEffect[Event, RaftState]</text></g><g id="elem_GMN27"><path d="M360.9,42.6612 L360.9,80.532 A0,0 0 0 0 360.9,80.532 L426.6,80.532 L429,132.6912 L431.4,80.532 L497.1,80.532 A0,0 0 0 0 497.1,80.532 L497.1,48.6612 L491.1,42.6612 L360.9,42.6612 A0,0 0 0 0 360.9,42.6612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><path d="M491.1,42.6612 L491.1,48.6612 L497.1,48.6612 L491.1,42.6612 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.3;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="13.2" x="364.5" y="53.9994">The</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" text-decoration="underline" textLength="19.8" x="379.5" y="53.9994">apply</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="63" x="401.1" y="53.9994">method is a static</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="123.6" x="364.5" y="64.623">method which returns a persistent</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="20.4" x="364.5" y="75.2466">actor.</text></g><!--MD5=[18efe760b990726fe968d2abbf214c58]
class StateMachine.Command--><g id="elem_StateMachine.Command"><rect codeLine="36" fill="#F1F1F1" height="28.8" id="StateMachine.Command" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="57.6" x="621" y="646.2612"/><ellipse cx="630" cy="655.8612" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M627.6188,659.7612 L627.6188,658.7393 L629.0344,658.5799 L629.0344,653.6581 L627.6188,653.4987 L627.6188,652.4768 L631.9031,652.4768 L631.9031,653.4987 L630.45,653.6581 L630.45,658.5799 L631.9031,658.7393 L631.9031,659.7612 L627.6188,659.7612 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="38.4" x="638.4" y="659.1204">Command</text><line style="stroke:#181818;stroke-width:0.3;" x1="621.6" x2="678" y1="665.4612" y2="665.4612"/><line style="stroke:#181818;stroke-width:0.3;" x1="621.6" x2="678" y1="670.2612" y2="670.2612"/></g><!--MD5=[2c8378720a964b636c28af4203d4aefb]
class RaftServer.Command--><g id="elem_RaftServer.Command"><rect codeLine="47" fill="#F1F1F1" height="28.8" id="RaftServer.Command" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="57.6" x="195.6" y="646.2612"/><ellipse cx="204.6" cy="655.8612" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M202.2188,659.7612 L202.2188,658.7393 L203.6344,658.5799 L203.6344,653.6581 L202.2188,653.4987 L202.2188,652.4768 L206.5031,652.4768 L206.5031,653.4987 L205.05,653.6581 L205.05,658.5799 L206.5031,658.7393 L206.5031,659.7612 L202.2188,659.7612 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="38.4" x="213" y="659.1204">Command</text><line style="stroke:#181818;stroke-width:0.3;" x1="196.2" x2="252.6" y1="665.4612" y2="665.4612"/><line style="stroke:#181818;stroke-width:0.3;" x1="196.2" x2="252.6" y1="670.2612" y2="670.2612"/></g><polygon fill="none" points="222.48,675.0612,225.0572,687.511,216.7309,686.4008" style="stroke:#181818;stroke-width:0.6;"/><line style="stroke:#181818;stroke-width:0.6;" x1="220.894" x2="220.8" y1="686.9559" y2="687.6612"/><line style="stroke:#181818;stroke-width:0.6;" x1="232.6799" x2="239.742" y1="646.2612" y2="633.9792"/><line style="stroke:#181818;stroke-width:0.6;" x1="219.4022" x2="213.888" y1="646.2612" y2="630.3732"/><!--MD5=[867f697058e83d6f7ec19e238fa09526]
class RaftServer.AppendEntries--><g id="elem_RaftServer.AppendEntries"><rect codeLine="48" fill="#F1F1F1" height="28.8" id="RaftServer.AppendEntries" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="79.2" x="107.4" y="751.5612"/><ellipse cx="116.4" cy="761.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M116.0813,765.3143 Q115.0313,765.3143 114.3469,764.8737 Q113.6719,764.4237 113.3344,763.6174 Q113.0063,762.8018 113.0063,761.7237 Q113.0063,760.5049 113.4,759.6331 Q113.7938,758.7612 114.5625,758.2924 Q115.3313,757.8237 116.4563,757.8237 Q116.9906,757.8237 117.3938,757.9362 Q117.7969,758.0393 118.2094,758.2456 L117.7219,759.4549 Q117.3469,759.2674 117.0188,759.1924 Q116.7,759.1174 116.4094,759.1174 Q115.7063,759.1174 115.2844,759.4362 Q114.8625,759.7549 114.6844,760.3268 Q114.5063,760.8987 114.5063,761.6581 Q114.5063,762.8674 114.9375,763.4487 Q115.3687,764.0206 116.325,764.0206 Q116.6812,764.0206 117.0562,763.9268 Q117.4312,763.8331 117.9281,763.6081 L117.9281,764.9393 Q117.4875,765.1268 117.0094,765.2206 Q116.5406,765.3143 116.0813,765.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="60" x="124.8" y="764.4204">AppendEntries</text><line style="stroke:#181818;stroke-width:0.3;" x1="108" x2="186" y1="770.7612" y2="770.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="108" x2="186" y1="775.5612" y2="775.5612"/></g><!--MD5=[5add5172f56b717c15e191971c16d9a7]
class RaftServer.AppendEntriesResponse--><g id="elem_RaftServer.AppendEntriesResponse"><rect codeLine="49" fill="#F1F1F1" height="28.8" id="RaftServer.AppendEntriesResponse" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="118.2" x="207.9" y="751.5612"/><ellipse cx="216.9" cy="761.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M216.5812,765.3143 Q215.5313,765.3143 214.8469,764.8737 Q214.1719,764.4237 213.8344,763.6174 Q213.5063,762.8018 213.5063,761.7237 Q213.5063,760.5049 213.9,759.6331 Q214.2938,758.7612 215.0625,758.2924 Q215.8312,757.8237 216.9562,757.8237 Q217.4906,757.8237 217.8937,757.9362 Q218.2969,758.0393 218.7094,758.2456 L218.2219,759.4549 Q217.8469,759.2674 217.5187,759.1924 Q217.2,759.1174 216.9094,759.1174 Q216.2062,759.1174 215.7844,759.4362 Q215.3625,759.7549 215.1844,760.3268 Q215.0063,760.8987 215.0063,761.6581 Q215.0063,762.8674 215.4375,763.4487 Q215.8688,764.0206 216.825,764.0206 Q217.1813,764.0206 217.5563,763.9268 Q217.9313,763.8331 218.4281,763.6081 L218.4281,764.9393 Q217.9875,765.1268 217.5094,765.2206 Q217.0406,765.3143 216.5812,765.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="99" x="225.3" y="764.4204">AppendEntriesResponse</text><line style="stroke:#181818;stroke-width:0.3;" x1="208.5" x2="325.5" y1="770.7612" y2="770.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="208.5" x2="325.5" y1="775.5612" y2="775.5612"/></g><!--MD5=[46938c0eab8650c270f234f9bf3e80c5]
class RaftServer.Event--><g id="elem_RaftServer.Event"><rect codeLine="51" fill="#F1F1F1" height="28.8" id="RaftServer.Event" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="39.6" x="451.8" y="646.2612"/><ellipse cx="460.8" cy="655.8612" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M458.4188,659.7612 L458.4188,658.7393 L459.8344,658.5799 L459.8344,653.6581 L458.4188,653.4987 L458.4188,652.4768 L462.7031,652.4768 L462.7031,653.4987 L461.25,653.6581 L461.25,658.5799 L462.7031,658.7393 L462.7031,659.7612 L458.4188,659.7612 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="20.4" x="469.2" y="659.1204">Event</text><line style="stroke:#181818;stroke-width:0.3;" x1="452.4" x2="490.8" y1="665.4612" y2="665.4612"/><line style="stroke:#181818;stroke-width:0.3;" x1="452.4" x2="490.8" y1="670.2612" y2="670.2612"/></g><polygon fill="none" points="469.68,675.0612,472.2572,687.511,463.9309,686.4008" style="stroke:#181818;stroke-width:0.6;"/><line style="stroke:#181818;stroke-width:0.6;" x1="468.094" x2="468" y1="686.9559" y2="687.6612"/><line style="stroke:#181818;stroke-width:0.6;" x1="475.4203" x2="479.664" y1="646.2612" y2="630.2652"/><line style="stroke:#181818;stroke-width:0.6;" x1="462.4893" x2="452.646" y1="646.2612" y2="630.7032"/><line style="stroke:#181818;stroke-width:0.6;" x1="484.6672" x2="498.012" y1="646.2612" y2="631.5552"/><line style="stroke:#181818;stroke-width:0.6;" x1="457.7724" x2="443.334" y1="646.2612" y2="631.2252"/><!--MD5=[06ee6e2cac8c488bd91b710b21a5e908]
class RaftServer.EntriesApplied--><g id="elem_RaftServer.EntriesApplied"><rect codeLine="52" fill="#F1F1F1" height="28.8" id="RaftServer.EntriesApplied" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="78.6" x="347.1" y="751.5612"/><ellipse cx="356.1" cy="761.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M355.7813,765.3143 Q354.7313,765.3143 354.0469,764.8737 Q353.3719,764.4237 353.0344,763.6174 Q352.7063,762.8018 352.7063,761.7237 Q352.7063,760.5049 353.1,759.6331 Q353.4938,758.7612 354.2625,758.2924 Q355.0313,757.8237 356.1563,757.8237 Q356.6906,757.8237 357.0938,757.9362 Q357.4969,758.0393 357.9094,758.2456 L357.4219,759.4549 Q357.0469,759.2674 356.7188,759.1924 Q356.4,759.1174 356.1094,759.1174 Q355.4063,759.1174 354.9844,759.4362 Q354.5625,759.7549 354.3844,760.3268 Q354.2063,760.8987 354.2063,761.6581 Q354.2063,762.8674 354.6375,763.4487 Q355.0687,764.0206 356.025,764.0206 Q356.3812,764.0206 356.7562,763.9268 Q357.1312,763.8331 357.6281,763.6081 L357.6281,764.9393 Q357.1875,765.1268 356.7094,765.2206 Q356.2406,765.3143 355.7813,765.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="59.4" x="364.5" y="764.4204">EntriesApplied</text><line style="stroke:#181818;stroke-width:0.3;" x1="347.7" x2="425.1" y1="770.7612" y2="770.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="347.7" x2="425.1" y1="775.5612" y2="775.5612"/></g><!--MD5=[e39c29ac111646dc9831f283be83f29b]
class RaftServer.AppendEntriesResponseEvent--><g id="elem_RaftServer.AppendEntriesResponseEvent"><rect codeLine="53" fill="#F1F1F1" height="28.8" id="RaftServer.AppendEntriesResponseEvent" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="140.4" x="447" y="751.5612"/><ellipse cx="456" cy="761.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M455.6813,765.3143 Q454.6312,765.3143 453.9469,764.8737 Q453.2719,764.4237 452.9344,763.6174 Q452.6063,762.8018 452.6063,761.7237 Q452.6063,760.5049 453,759.6331 Q453.3938,758.7612 454.1625,758.2924 Q454.9313,757.8237 456.0563,757.8237 Q456.5906,757.8237 456.9938,757.9362 Q457.3969,758.0393 457.8094,758.2456 L457.3219,759.4549 Q456.9469,759.2674 456.6188,759.1924 Q456.3,759.1174 456.0094,759.1174 Q455.3063,759.1174 454.8844,759.4362 Q454.4625,759.7549 454.2844,760.3268 Q454.1063,760.8987 454.1063,761.6581 Q454.1063,762.8674 454.5375,763.4487 Q454.9688,764.0206 455.925,764.0206 Q456.2813,764.0206 456.6563,763.9268 Q457.0313,763.8331 457.5281,763.6081 L457.5281,764.9393 Q457.0875,765.1268 456.6094,765.2206 Q456.1406,765.3143 455.6813,765.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="121.2" x="464.4" y="764.4204">AppendEntriesResponseEvent</text><line style="stroke:#181818;stroke-width:0.3;" x1="447.6" x2="586.8" y1="770.7612" y2="770.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="447.6" x2="586.8" y1="775.5612" y2="775.5612"/></g><!--MD5=[1a73e52edbc4b96611fb9c4d7397775a]
class Log.LogEntry--><g id="elem_Log.LogEntry"><rect codeLine="66" fill="#F1F1F1" height="28.8" id="Log.LogEntry" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="54.6" x="879.9" y="517.5612"/><ellipse cx="888.9" cy="527.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M888.5813,531.3143 Q887.5313,531.3143 886.8469,530.8737 Q886.1719,530.4237 885.8344,529.6174 Q885.5063,528.8018 885.5063,527.7237 Q885.5063,526.5049 885.9,525.6331 Q886.2937,524.7612 887.0625,524.2924 Q887.8313,523.8237 888.9563,523.8237 Q889.4906,523.8237 889.8938,523.9362 Q890.2969,524.0393 890.7094,524.2456 L890.2219,525.4549 Q889.8469,525.2674 889.5188,525.1924 Q889.2,525.1174 888.9094,525.1174 Q888.2063,525.1174 887.7844,525.4362 Q887.3625,525.7549 887.1844,526.3268 Q887.0063,526.8987 887.0063,527.6581 Q887.0063,528.8674 887.4375,529.4487 Q887.8688,530.0206 888.825,530.0206 Q889.1813,530.0206 889.5563,529.9268 Q889.9313,529.8331 890.4281,529.6081 L890.4281,530.9393 Q889.9875,531.1268 889.5094,531.2206 Q889.0406,531.3143 888.5813,531.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="35.4" x="897.3" y="530.4204">LogEntry</text><line style="stroke:#181818;stroke-width:0.3;" x1="880.5" x2="933.9" y1="536.7612" y2="536.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="880.5" x2="933.9" y1="541.5612" y2="541.5612"/></g><!--MD5=[d9284a68a35085e9d4d1c89004e75285]
class RaftState.RaftState--><g id="elem_RaftState.RaftState"><rect codeLine="97" fill="#F1F1F1" height="108.8853" id="RaftState.RaftState" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="221.4" x="434.1" y="335.1612"/><ellipse cx="525.15" cy="344.7612" fill="#B4A7E5" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M522.7688,348.6612 L522.7688,347.6393 L524.1844,347.4799 L524.1844,342.5581 L522.7688,342.3987 L522.7688,341.3768 L527.0531,341.3768 L527.0531,342.3987 L525.6,342.5581 L525.6,347.4799 L527.0531,347.6393 L527.0531,348.6612 L522.7688,348.6612 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" font-style="italic" lengthAdjust="spacing" textLength="34.2" x="537.45" y="348.0204">RaftState</text><line style="stroke:#181818;stroke-width:0.3;" x1="434.7" x2="654.9" y1="354.3612" y2="354.3612"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="60.6" x="437.7" y="365.7408">Log: LogEntry[]</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="75.6" x="437.7" y="377.1815">currentTerm: Long</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="101.4" x="437.7" y="388.6223">votedFor: Option&lt;String&gt;</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="31.8" x="437.7" y="400.063">log: Log</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="77.4" x="437.7" y="411.5038">commitIndex: Long</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="70.2" x="437.7" y="422.9445">lastApplied: Long</text><line style="stroke:#181818;stroke-width:0.3;" x1="434.7" x2="654.9" y1="427.8057" y2="427.8057"/><ellipse cx="440.7" cy="436.8261" fill="#84BE84" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="205.8" x="446.1" y="439.1853">applyEvent(state: RaftState, event: Event): RaftState</text></g><polygon fill="none" points="548.2099,444.0464,553.1518,455.7604,544.7682,456.2855" style="stroke:#181818;stroke-width:0.6;"/><line style="stroke:#181818;stroke-width:0.6;" x1="548.96" x2="549" y1="456.023" y2="456.6612"/><line style="stroke:#181818;stroke-width:0.6;" x1="512.1609" x2="502.848" y1="335.1612" y2="319.6272"/><!--MD5=[901a5f0af48da9138607dde15df414b7]
class RaftState.Leader--><g id="elem_RaftState.Leader"><rect codeLine="108" fill="#F1F1F1" height="51.6815" id="RaftState.Leader" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="141.6" x="484.2" y="506.1612"/><ellipse cx="538.65" cy="515.7612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M538.3313,519.9143 Q537.2813,519.9143 536.5969,519.4737 Q535.9219,519.0237 535.5844,518.2174 Q535.2563,517.4018 535.2563,516.3237 Q535.2563,515.1049 535.65,514.2331 Q536.0437,513.3612 536.8125,512.8924 Q537.5813,512.4237 538.7063,512.4237 Q539.2406,512.4237 539.6438,512.5362 Q540.0469,512.6393 540.4594,512.8456 L539.9719,514.0549 Q539.5969,513.8674 539.2688,513.7924 Q538.95,513.7174 538.6594,513.7174 Q537.9563,513.7174 537.5344,514.0362 Q537.1125,514.3549 536.9344,514.9268 Q536.7563,515.4987 536.7563,516.2581 Q536.7563,517.4674 537.1875,518.0487 Q537.6188,518.6206 538.575,518.6206 Q538.9313,518.6206 539.3063,518.5268 Q539.6813,518.4331 540.1781,518.2081 L540.1781,519.5393 Q539.7375,519.7268 539.2594,519.8206 Q538.7906,519.9143 538.3313,519.9143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="27.6" x="550.95" y="519.0204">Leader</text><line style="stroke:#181818;stroke-width:0.3;" x1="484.8" x2="625.2" y1="525.3612" y2="525.3612"/><ellipse cx="490.8" cy="534.3816" fill="none" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="126" x="496.2" y="536.7408">matchIndex: Map[String, Long]</text><ellipse cx="490.8" cy="545.8223" fill="none" rx="1.8" ry="1.8" style="stroke:#038048;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="118.2" x="496.2" y="548.1815">nextIndex: Map[String, Long]</text><line style="stroke:#181818;stroke-width:0.3;" x1="484.8" x2="625.2" y1="553.0427" y2="553.0427"/></g><!--MD5=[3722959e50e3fc6be21b4e738740c1cd]
class RaftState.Follower--><g id="elem_RaftState.Follower"><rect codeLine="112" fill="#F1F1F1" height="28.8" id="RaftState.Follower" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="52.8" x="410.4" y="517.5612"/><ellipse cx="419.4" cy="527.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M419.0813,531.3143 Q418.0313,531.3143 417.3469,530.8737 Q416.6719,530.4237 416.3344,529.6174 Q416.0062,528.8018 416.0062,527.7237 Q416.0062,526.5049 416.4,525.6331 Q416.7938,524.7612 417.5625,524.2924 Q418.3313,523.8237 419.4563,523.8237 Q419.9906,523.8237 420.3938,523.9362 Q420.7969,524.0393 421.2094,524.2456 L420.7219,525.4549 Q420.3469,525.2674 420.0188,525.1924 Q419.7,525.1174 419.4094,525.1174 Q418.7063,525.1174 418.2844,525.4362 Q417.8625,525.7549 417.6844,526.3268 Q417.5062,526.8987 417.5062,527.6581 Q417.5062,528.8674 417.9375,529.4487 Q418.3688,530.0206 419.325,530.0206 Q419.6813,530.0206 420.0563,529.9268 Q420.4313,529.8331 420.9281,529.6081 L420.9281,530.9393 Q420.4875,531.1268 420.0094,531.2206 Q419.5406,531.3143 419.0813,531.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="33.6" x="427.8" y="530.4204">Follower</text><line style="stroke:#181818;stroke-width:0.3;" x1="411" x2="462.6" y1="536.7612" y2="536.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="411" x2="462.6" y1="541.5612" y2="541.5612"/></g><!--MD5=[2ca9f24f400a2a264137252b58d3eeeb]
class RaftState.Candidate--><g id="elem_RaftState.Candidate"><rect codeLine="113" fill="#F1F1F1" height="28.8" id="RaftState.Candidate" rx="1.5" ry="1.5" style="stroke:#181818;stroke-width:0.3;" width="60.6" x="647.1" y="517.5612"/><ellipse cx="656.1" cy="527.1612" fill="#ADD1B2" rx="6.6" ry="6.6" style="stroke:#181818;stroke-width:0.6;"/><path d="M655.7813,531.3143 Q654.7312,531.3143 654.0469,530.8737 Q653.3719,530.4237 653.0344,529.6174 Q652.7063,528.8018 652.7063,527.7237 Q652.7063,526.5049 653.1,525.6331 Q653.4938,524.7612 654.2625,524.2924 Q655.0313,523.8237 656.1563,523.8237 Q656.6906,523.8237 657.0938,523.9362 Q657.4969,524.0393 657.9094,524.2456 L657.4219,525.4549 Q657.0469,525.2674 656.7188,525.1924 Q656.4,525.1174 656.1094,525.1174 Q655.4063,525.1174 654.9844,525.4362 Q654.5625,525.7549 654.3844,526.3268 Q654.2063,526.8987 654.2063,527.6581 Q654.2063,528.8674 654.6375,529.4487 Q655.0688,530.0206 656.025,530.0206 Q656.3813,530.0206 656.7563,529.9268 Q657.1313,529.8331 657.6281,529.6081 L657.6281,530.9393 Q657.1875,531.1268 656.7094,531.2206 Q656.2406,531.3143 655.7813,531.3143 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacing" textLength="41.4" x="664.5" y="530.4204">Candidate</text><line style="stroke:#181818;stroke-width:0.3;" x1="647.7" x2="707.1" y1="536.7612" y2="536.7612"/><line style="stroke:#181818;stroke-width:0.3;" x1="647.7" x2="707.1" y1="541.5612" y2="541.5612"/></g><!--MD5=[8df0c6faf2083639ae77c22eb56dfc38]
link N1 to RaftServer.Command--><g id="link_N1_RaftServer.Command"><path codeLine="62" d="M288.492,551.1012 C275.658,572.9232 254.25,609.3132 239.742,633.9792 " fill="none" id="N1-RaftServer.Command" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[26f6857dff9820731f9948696405eb71]
link N1 to StateMachine.Command--><g id="link_N1_StateMachine.Command"><path codeLine="63" d="M337.44,551.0772 C356.07,559.1892 379.116,567.8352 400.8,572.1612 C412.866,574.5672 612.3,569.6532 622.2,576.9612 C643.968,593.0292 648.81,626.9292 649.74,646.0932 " fill="none" id="N1-StateMachine.Command" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/></g><!--MD5=[efe0cffba34ce96529e565cca927fa61]
link Log.LogEntry to Log--><g id="link_Log.LogEntry_Log"><path codeLine="118" d="M906.954,546.6192 C906.216,558.3912 903.9,575.2992 897,588.3612 C895.008,592.1292 892.746,595.8252 890.286,599.4252 " fill="none" id="Log.LogEntry-to-Log" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="885.87,605.4972,889.9294,604,890.1086,599.677,886.0492,601.1742,885.87,605.4972" style="stroke:#181818;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="902.2115" y="559.5754">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="878.0505" y="599.2573">0..*</text></g><!--MD5=[4520b282932562787465b9c3ad68444d]
link StateMachine to StateMachine.Command--><g id="link_StateMachine_StateMachine.Command"><path codeLine="120" d="M755.724,556.2372 C743.916,562.4892 730.59,568.5072 717.6,572.1612 C710.136,574.2612 653.292,571.2972 648,576.9612 C631.8,594.3192 637.164,623.6892 643.068,642.4632 " fill="none" id="StateMachine-to-StateMachine.Command" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="643.968,645.2052,644.5691,639.3265,643.0347,642.354,640.0072,640.8197,643.968,645.2052" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="653.3823,581.0496,648.0009,582.9479,650.1444,585.7484,653.3823,581.0496" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="42.6" x="656.4" y="585.8994">Received by</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="736.4239" y="569.452">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="638.0897" y="639.2156">1</text></g><!--MD5=[a67771ceedb9ece7ea28fd29bdd7829f]
reverse link RaftServer.Command to RaftServer.AppendEntries--><g id="link_RaftServer.Command_RaftServer.AppendEntries"><path codeLine="122" d="M220.8,687.6612 C220.8,687.6612 181.632,728.8992 160.362,751.2912 " fill="none" id="RaftServer.Command-backto-RaftServer.AppendEntries" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[628652fd7c2c9987cf467a02ad83d4f0]
reverse link RaftServer.Command to RaftServer.AppendEntriesResponse--><g id="link_RaftServer.Command_RaftServer.AppendEntriesResponse"><path codeLine="123" d="M220.8,687.6612 C220.8,687.6612 245.322,728.8992 258.636,751.2912 " fill="none" id="RaftServer.Command-backto-RaftServer.AppendEntriesResponse" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[4294f591598022c936716769ae2f4c0d]
reverse link RaftServer.Event to RaftServer.EntriesApplied--><g id="link_RaftServer.Event_RaftServer.EntriesApplied"><path codeLine="125" d="M468,687.6612 C468,687.6612 424.692,728.8992 401.178,751.2912 " fill="none" id="RaftServer.Event-backto-RaftServer.EntriesApplied" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[30a8a71fe6106b230c92aceb314e6ed8]
reverse link RaftServer.Event to RaftServer.AppendEntriesResponseEvent--><g id="link_RaftServer.Event_RaftServer.AppendEntriesResponseEvent"><path codeLine="126" d="M468,687.6612 C468,687.6612 494.112,728.8992 508.29,751.2912 " fill="none" id="RaftServer.Event-backto-RaftServer.AppendEntriesResponseEvent" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[0b6ec583d72c4880a16ad8f59a9ab69c]
reverse link RaftState.RaftState to RaftState.Leader--><g id="link_RaftState.RaftState_RaftState.Leader"><path codeLine="128" d="M549,456.6612 C549,456.6612 551.214,484.2252 552.954,505.8612 " fill="none" id="RaftState.RaftState-backto-RaftState.Leader" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[c117e887ea42ac98421d01f6f489c988]
reverse link RaftState.RaftState to RaftState.Follower--><g id="link_RaftState.RaftState_RaftState.Follower"><path codeLine="129" d="M549,456.6612 C549,456.6612 513.81,472.8192 485.4,485.1612 C480.36,487.3512 478.476,486.7752 474,489.9612 C463.374,497.5272 453.612,508.6272 446.754,517.4292 " fill="none" id="RaftState.RaftState-backto-RaftState.Follower" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[a21a4385fb52bdad5cb5e2a744728277]
reverse link RaftState.RaftState to RaftState.Candidate--><g id="link_RaftState.RaftState_RaftState.Candidate"><path codeLine="130" d="M549,456.6612 C549,456.6612 588.528,473.7612 621,485.1612 C627.846,487.5672 630.402,486.1992 636.6,489.9612 C648.33,497.0832 659.112,508.3212 666.642,517.2912 " fill="none" id="RaftState.RaftState-backto-RaftState.Candidate" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[afe01245b5c8b0e1c6668ff901ba079f]
link RaftState.Leader to RaftServer.Event--><g id="link_RaftState.Leader_RaftServer.Event"><path codeLine="132" d="M521.544,558.0012 C515.364,563.7612 509.364,570.1932 504.6,576.9612 C493.26,593.0712 485.058,613.6272 479.664,630.2652 " fill="none" id="RaftState.Leader-to-RaftServer.Event" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="478.764,633.1032,482.685,628.6822,479.6715,630.2437,478.1099,627.2302,478.764,633.1032" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="506.0957,585.4686,510.3426,581.6573,507.2913,579.8889,506.0957,585.4686" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="36.6" x="513" y="585.8994">consumes</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="503.7489" y="570.9382">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="475.0511" y="627.0789">1</text></g><!--MD5=[d0447a6976357518e65cc2ea84e2bdfe]
link RaftState.Follower to RaftServer.Event--><g id="link_RaftState.Follower_RaftServer.Event"><path codeLine="133" d="M434.316,546.5292 C432.774,557.9412 431.646,574.4112 435,588.3612 C438.54,603.0792 445.638,618.1812 452.646,630.7032 " fill="none" id="RaftState.Follower-to-RaftServer.Event" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="454.074,633.2052,453.4891,627.3249,452.5902,630.5978,449.3173,629.699,454.074,633.2052" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="438.6383,585.8043,439.2066,580.1263,435.7606,580.8767,438.6383,585.8043" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="36.6" x="443.4" y="585.8994">consumes</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="420.3541" y="559.4646">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="447.2678" y="627.1068">1</text></g><!--MD5=[6a04098be6b98e11b94df6c5a7f45764]
link RaftState.Candidate to RaftServer.Event--><g id="link_RaftState.Candidate_RaftServer.Event"><path codeLine="134" d="M667.296,546.4692 C659.898,555.4812 649.014,566.5452 636.6,572.1612 C611.982,583.2972 601.134,567.0492 576,576.9612 C545.886,588.8352 517.548,612.5052 498.012,631.5552 " fill="none" id="RaftState.Candidate-to-RaftServer.Event" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="496.08,633.4512,501.6124,631.3746,498.2184,631.3471,498.2459,627.9531,496.08,633.4512" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="576.3195,584.2203,581.9604,583.3586,580.3766,580.2075,576.3195,584.2203" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="36.6" x="584.4" y="585.8994">consumes</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="651.572" y="559.3907">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="494.6955" y="627.2181">1</text></g><!--MD5=[a832f7384837fdd7a1a4d540d828a38b]
reverse link RaftState.Leader to Log--><g id="link_RaftState.Leader_Log"><path codeLine="136" d="M606.684,561.5652 C616.368,565.8552 626.592,569.6652 636.6,572.1612 C650.514,575.6352 752.988,570.1332 765.6,576.9612 C778.188,583.7772 788.7,594.5952 797.184,606.2052 " fill="none" id="RaftState.Leader-backto-Log" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="599.88,558.4212,602.1401,562.1106,606.415,561.4434,604.1549,557.754,599.88,558.4212" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="786.5209,583.5574,781.6393,580.6024,780.8346,584.0361,786.5209,583.5574" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="30.6" x="789" y="585.8994">contains</text></g><!--MD5=[c2db7dd83294d9d320bc29c29a15435c]
reverse link RaftState.Follower to Log--><g id="link_RaftState.Follower_Log"><path codeLine="137" d="M450.666,553.1412 C456.852,560.5452 464.832,568.0812 474,572.1612 C497.148,582.4692 677.862,569.2632 702,576.9612 C705.054,577.9332 724.308,590.7672 746.676,606.0672 " fill="none" id="RaftState.Follower-backto-Log" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="446.058,547.1892,446.3692,551.5046,450.4723,552.8772,450.1612,548.5618,446.058,547.1892" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="725.9532,583.401,720.9212,580.71,720.3005,584.1816,725.9532,583.401" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="30.6" x="728.4" y="585.8994">contains</text></g><!--MD5=[e16980a67fd650ff8427da7fd0f6dc73]
reverse link RaftState.Candidate to Log--><g id="link_RaftState.Candidate_Log"><path codeLine="138" d="M689.736,553.6152 C695.106,560.8092 702.096,568.0632 710.4,572.1612 C722.25,578.0052 820.05,567.4332 829.2,576.9612 C836.76,584.8332 839.442,595.2852 839.466,606.1152 " fill="none" id="RaftState.Candidate-backto-Log" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="685.422,547.3152,685.4708,551.6416,689.4832,553.2605,689.4344,548.9341,685.422,547.3152" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="841.631,583.8656,837.0931,580.4059,835.9262,583.734,841.631,583.8656" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="30.6" x="844.2" y="585.8994">contains</text></g><!--MD5=[2692a4cfbb82c8a35d58d748f6738fbc]
reverse link Server to ServerImpl--><g id="link_Server_ServerImpl"><path codeLine="140" d="M107.886,557.8092 C94.584,584.2332 74.172,624.7692 63.48,645.9972 " fill="none" id="Server-backto-ServerImpl" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="104.052,556.0872,113.196,547.2612,111.552,559.8672,104.052,556.0872" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[9484f28675db217b1136ca911242d4e1]
reverse link Configuration to Server--><g id="link_Configuration_Server"><path codeLine="141" d="M120.6,435.3912 C120.6,463.7532 120.6,498.3792 120.6,517.3212 " fill="none" id="Configuration-backto-Server" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="none" points="120.6,427.7232,118.2,431.3232,120.6,434.9232,123,431.3232,120.6,427.7232" style="stroke:#181818;stroke-width:0.6;"/></g><!--MD5=[4a0098b5141273bb1a26cb7d79e44470]
link RaftServer to RaftState.RaftState--><g id="link_RaftServer_RaftState.RaftState"><path codeLine="144" d="M467.718,261.6612 C479.004,280.2792 491.376,300.7032 502.848,319.6272 " fill="none" id="RaftServer-to-RaftState.RaftState" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="504.36,322.1232,503.6167,316.2608,502.8064,319.5568,499.5104,318.7465,504.36,322.1232" style="stroke:#181818;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="30.6" x="483.6" y="288.2994">contains</text></g><!--MD5=[67f85315b686251844a230589e3c3e3c]
link RaftServer to RaftServer.Command--><g id="link_RaftServer_RaftServer.Command"><path codeLine="145" d="M385.53,261.4692 C379.818,272.4372 374.778,284.0232 371.4,295.5612 C366.396,312.6552 376.956,442.2072 365.4,455.7612 C344.058,480.7872 240.99,463.5432 221.4,489.9612 C191.124,530.7852 202.908,593.5932 213.888,630.3732 " fill="none" id="RaftServer-to-RaftServer.Command" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="214.746,633.2052,215.469,627.3403,213.8722,630.3353,210.8772,628.7384,214.746,633.2052" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="277.2655,476.953,273.3774,481.1296,276.5749,482.6174,277.2655,476.953" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="48" x="281.4" y="482.6994">is received by</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="370.2062" y="274.4859">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="208.9788" y="627.1902">1</text></g><!--MD5=[8ba9ec20f5cb361782b90193f5ee5741]
link RaftServer to RaftServer.Event--><g id="link_RaftServer_RaftServer.Event"><path codeLine="146" d="M409.518,261.4092 C406.374,272.7252 403.332,284.4492 400.8,295.5612 C384.774,365.9652 416.352,397.4292 373.8,455.7612 C363.54,469.8312 348.054,458.8872 339,473.7612 C336.366,478.0872 335.646,481.3632 339,485.1612 C350.568,498.2412 364.77,478.5612 378,489.9612 C406.716,514.7112 383.484,538.4352 400.8,572.1612 C411.882,593.7492 428.808,615.0192 443.334,631.2252 " fill="none" id="RaftServer-to-RaftServer.Event" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="445.224,633.3132,443.3836,627.6978,443.2124,631.0876,439.8226,630.9164,445.224,633.3132" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="341.7268,476.6855,340.465,482.2505,343.977,481.9294,341.7268,476.6855" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="52.8" x="347.4" y="482.6994">is produced by</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="395.8059" y="274.4218">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="437.1882" y="627.0998">1</text></g><!--MD5=[954c5c3513522ca5fbcd5a708e781efb]
link RaftServer to Server--><g id="link_RaftServer_Server"><path codeLine="147" d="M318.33,261.6552 C306.342,271.8552 295.236,283.1832 286.2,295.5612 C242.37,355.5912 282.9,396.3792 238.2,455.7612 C214.242,487.5852 172.662,509.6772 145.908,521.4372 " fill="none" id="RaftServer-to-Server" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="143.232,522.5952,149.141,522.6518,145.985,521.4031,147.2337,518.247,143.232,522.5952" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="287.541,392.1725,292.0114,388.626,289.073,386.6757,287.541,392.1725" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="67.8" x="294.6" y="392.6994">sends messages to</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="12" x="298.8558" y="274.4662">0..*</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="146.9536" y="518.452">1</text></g><!--MD5=[a7050f77cc7f58b72686df9db393e25e]
link RaftServer to Configuration--><g id="link_RaftServer_Configuration"><path codeLine="148" d="M265.746,261.5952 C255.39,267.1992 245.316,273.1272 235.8,279.3612 C205.968,298.9032 176.892,326.6232 155.418,349.2792 " fill="none" id="RaftServer-to-Configuration" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="153.456,351.3552,158.9046,349.0678,155.5121,349.1706,155.4093,345.778,153.456,351.3552" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="236.4514,287.1396,241.7972,285.1434,239.6029,282.3824,236.4514,287.1396" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="19.8" x="244.2" y="288.2994">holds</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="250.953" y="274.4023">1</text></g><!--MD5=[a2c6cd2f1234db70566c62a2ee76e4ff]
link RaftServer to StateMachine--><g id="link_RaftServer_StateMachine"><path codeLine="149" d="M673.998,261.2052 C689.868,271.0512 704.646,282.4212 717.6,295.5612 C775.002,353.7852 789.174,455.5152 792.666,504.0672 " fill="none" id="RaftServer-to-StateMachine" style="stroke:#181818;stroke-width:0.6;stroke-dasharray:7.0,7.0;"/><polygon fill="#181818" points="792.852,506.8452,794.8759,501.2933,792.6462,503.8523,790.0872,501.6226,792.852,506.8452" style="stroke:#181818;stroke-width:0.6;"/><polygon fill="#000000" points="790.9171,392.3684,790.1188,386.7182,786.9501,388.2665,790.9171,392.3684" style="stroke:#000000;stroke-width:0.6;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="67.8" x="795" y="392.6994">sends messages to</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacing" textLength="4.2" x="678.5271" y="272.0364">1</text></g><!--MD5=[d305f42ed72c9d550196df3f59a3fb66]
@startuml

skinparam groupInheritance 2

package com.telegraft.rafktor {

note as N0
  This diagram uses elements from
  the scala syntax: types are specified
  after ":" and type parameters are
  between squared brackets. Collections
  and types are the ones used in the actual
  code.
end note


  class Configuration {
    - servers: Set[String]
    + Configuration(servers: Set[String]): Configuration
    + getConfiguration(): Set[String]
    + getServer(server: String): String
  }

  note top of Configuration
    Servers are parsed from the provided
    configuration, and they are identified
    by the following string "interface:port"
  end note

  interface Server {

  }

  class ServerImpl

  namespace StateMachine {
    interface Command
  }

  class StateMachine << (S,#FF7700) Singleton >> {
    {static} +apply(): Behavior[Command]
  }




  namespace RaftServer {
    interface Command
    class AppendEntries
    class AppendEntriesResponse

    interface Event
    class EntriesApplied
    class AppendEntriesResponseEvent
  }

   note as N1
      There are more than the displayed
      implementations, but they are not
      shown for the sake of brevity.
    end note

    N1 .. RaftServer.Command
    N1 .. StateMachine.Command

  namespace Log {
    class LogEntry
  }

  class Log {
    + logEntries: Vector[LogEntry]
    + Log(logEntries: Vector[LogEntry]): Log
    + apply(index: Int): LogEntry
    + length(): Int
    + lastLogTerm(): Long
    + appendEntries(newEntries: Log, prevLogIndex: Int): Log
    {static} + empty(): Log
  }

  class RaftServer << (S,#FF7700) Singleton >> {
    {static} +apply(serverId: String, stateMachine: ActorRef[StateMachine.Command], config: Configuration) : Behavior[Command]
    {static} - commandHandler(config: Configuration,
       timer: TimerScheduler[Command],
       context: ActorContext[Command],
       serverId: String,
       stateMachine: ActorRef[StateMachine.Command],
       s: RaftState,
       c: Command): ReplyEffect[Event, RaftState]
  }

  note top of RaftServer
    The <u>apply</u> method is a static
    method which returns a persistent
    actor.
  end note

  namespace RaftState {
    interface RaftState {
      Log: LogEntry[]
      currentTerm: Long
      votedFor: Option<String>
      log: Log
      commitIndex: Long
      lastApplied: Long

      + applyEvent(state: RaftState, event: Event): RaftState

    }
    class Leader {
      + matchIndex: Map[String, Long]
      + nextIndex: Map[String, Long]
    }
    class Follower
    class Candidate
  }

}

Log.LogEntry "1" - -o "0..*" Log

StateMachine "0..*"..>"1" StateMachine.Command: Received by <

RaftServer.Command <|- - RaftServer.AppendEntries
RaftServer.Command <|- - RaftServer.AppendEntriesResponse

RaftServer.Event <|- - RaftServer.EntriesApplied
RaftServer.Event <|- - RaftServer.AppendEntriesResponseEvent

RaftState.RaftState <|- - RaftState.Leader
RaftState.RaftState <|- - RaftState.Follower
RaftState.RaftState <|- - RaftState.Candidate

RaftState.Leader "0..*"..>"1" RaftServer.Event: consumes >
RaftState.Follower "0..*"..>"1" RaftServer.Event: consumes >
RaftState.Candidate "0..*"..>"1" RaftServer.Event: consumes >

RaftState.Leader o- - Log: contains >
RaftState.Follower o- - Log: contains >
RaftState.Candidate o- - Log: contains >

Server <|- - ServerImpl
Configuration o- - Server


RaftServer ..> RaftState.RaftState: contains
RaftServer "0..*" ..> "1" RaftServer.Command: < is received by
RaftServer "0..*" ..> "1" RaftServer.Event: < is produced by
RaftServer "0..*" ..> "1" Server: sends messages to >
RaftServer "1" ..> Configuration: holds >
RaftServer "1" ..> StateMachine: sends messages to >

@enduml

PlantUML version 1.2022.12(Sun Oct 23 20:12:26 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: it
Country: IT
--></g></svg>